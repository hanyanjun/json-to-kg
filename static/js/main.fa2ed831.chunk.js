(this["webpackJsonpjson-to-kg"]=this["webpackJsonpjson-to-kg"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){},137:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(25),a=n.n(o),s=(n(126),n(127),n(23)),l=n(29),c=n(21),u=n(22),h=n(70),d=n(118),p=n(112),f=n(69),g=n(33),v=n(98),y=function e(t){Object(c.a)(this,e),this.onGraphChange=null,this.onTick=null,null==t&&(t={}),Object.assign(this,t),null===this.onGraphChange&&(this.onGraphChange=function(){}),null===this.onTick&&(this.onTick=function(){})},m=function(){},b=new y({onGraphChange:function(e,t){var n=e.selectAll("defs.img").data((function(e){return[e]}));return n.enter().append("defs").append("pattern").classed("pattern",!0).attr({patternContentUnits:"objectBoundingBox",id:"avatar",width:"100%",height:"100%"}).append("image").attr({height:1,width:1,"xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAEjklEQVR4nO3c2UrrUBTG8b9SpWLF4nHAEfXeN1BUFOcBRUUfwu74JDYd0Lb4SqWt4oBeOqB3ouKVei48nGOPTZudbjtlr8uma6/w40sCSUhdLBb74Acqk8kQi8WUrTc9Pc3a2ppUz9HREclkUsl8r9eLYRj09/dn/V6vZPX/yi148AOAbsIDxYBuwwPwKJlE7eE1NTUhhMiLB4oS6FY8UJDAdDpNPB4vdpm/NTMzw+rqqlRPufCgyAS6HQ+KSGAl4CUSCVKplJL5TU1NGIZBX1+f7Z6rqytnCdR4n3jhcFg+gRrvEy8UCvH29iaXQI2XjQcSFxGN9x0PbF5Eag2vubmZQCBQNB7YAEylUiQSCfm9tKjZ2VlWVlakesqNd3l5STgc/oYHBQ5hjZcfD/IksBLw4vE46XRayfzm5maEEPT29truKYQHFgnUePbwIEcCNd4nXigU4v39veB/sxKo8eTw4AugxpPHgz+HcK3h+Xw+AoHAj+MBeJLJJEdHR7L7aFluwgOo83g8yh5rzs3Nsby8LNVTbryLiwsikYgjPFD4UMmNeKDooZITvFgsRiaTUTEen8+HEIKenh7bPSrwQEEC3YwHRSawWvHC4TAfH2pO/Y4TqPFgdHTUGaDG+8Tb2dmRB9R4//BA8hw4Pz/P0tKS1LBy452fnxOJRH4EDyQANR6MjY2xvb2d9ZstQCd4h4eHHB8fS/VYlc/nwzAMuru7bfeUAg9sXIU1njUeFEhgufFaWloQQkjjhcNhJfMhPx7kSaDGK4z3+vqaO4HViHd2dkYkElEyH2B8fJytrS3L7a+vr5im+R1Q49nDCwaDXF9fZx/CGk8OD75cRBYWFlhcXJQa5nY8+APoBO/g4ICTkxOHu5pd1YoH4KkEvL29Pbq6umz3lBrv5eWFUCj0DQ+gXuM5xwPJmwkq8VpbWxFCVDUeSACWG+/09JRoNKpkPqjBA5uAtYY3MTHB5uam5faXlxdM0+Tm5qbgWgUBo9Eop6encntoUa2trRiGQWdnp+2eSsaDAndjNF7hsgTUePYqJ6DGs1/fzoFuw3t+fiYUCjnCg/8AVeL5/X6EEDWNB18OYY3nrDxQfryTkxMODg6UzAeYnJxkY2PDcrsqPIC6kZGRj7Ozs6IXgurBM02T29tbJfOUvWDp9/sxDIOOjg7bPdWONzAwoOYFS7fiCSGKB3QzntfrLQ7Q7XhQxAuWbsQbHBxkd3f3Lx44fMFS4/0r6QQ6wTs+Pubw8FB2lGVNTU2xvr5uub1UeCAJWC14wWCQu7s7JfMGBwcRQtDY2Jhzu21Av9/P3t4e7e3ttofXOh7YBKwGvKenJ0zTVIY3NDREIBDIiwc2LiIaL3/lBdR4hcsSUOPZq5znwLa2NoQQFY+3v7/P/f29knlO8CBHAjWeXGUl0Aleqb9eWUl48AXQrXhCCBoaGhyv4YFPPMMw+PXrl+3GUuM9Pj5immZF4QF43Ig3PDxMIBAoGg+gXuMVVx4ZPNWfwat2PJC4mVAOvGAwyMPDg5J5P4EHNm+oajzrKpjAUn+9sprwAH4DZmdcmtPQSQAAAAAASUVORK5CYII="}),n.exit().remove()},onTick:m}),x=new y({onGraphChange:function(e,t){var n=e.selectAll("circle.outline").data((function(e){return[e]}));return n.enter().append("circle").classed("outline",!0).attr({cx:0,cy:0}),n.attr({r:function(e){return e.radius},fill:function(e){return e.isFilter?"url(#avatar)":t.style.forNode(e).get("color")},stroke:function(e){return t.style.forNode(e).get("border-color")},"stroke-width":function(e){return t.style.forNode(e).get("border-width")}}),n.exit().remove()},onTick:m}),k=new y({onGraphChange:function(e,t){var n=e.selectAll("text.caption").data((function(e){return e.caption}));return n.enter().append("text").classed("caption",!0).attr({"text-anchor":"middle"}).attr({"pointer-events":"none"}),n.text((function(e){return e.text})).attr("y",(function(e){return e.baseline})).attr("font-size",(function(e){return t.style.forNode(e.node).get("font-size")})).attr({fill:function(e){return t.style.forNode(e.node).get("text-color-internal")}}),n.exit().remove()},onTick:m}),w=new y({onGraphChange:function(e,t){var n=e.selectAll("g").data((function(e){return e.caption}));return n.enter().append("text").attr({"text-anchor":"middle"}).attr({"pointer-events":"none"}).attr({"font-family":"streamline"}),n.text((function(e){return t.style.forNode(e.node).get("icon-code")})).attr("dy",(function(e){return e.node.radius/16})).attr("font-size",(function(e){return e.node.radius})).attr({fill:function(e){return t.style.forNode(e.node).get("text-color-internal")}}),n.exit().remove()},onTick:m}),C=new y({onGraphChange:function(e){var t=e.selectAll("circle.ring").data((function(e){return[e]}));return t.enter().insert("circle",".outline").classed("ring",!0).attr({cx:0,cy:0,"stroke-width":"8px"}),t.attr({r:function(e){return e.radius+4}}),t.exit().remove()},onTick:m}),j=new y({name:"arrowPath",onGraphChange:function(e,t){var n=e.selectAll("path.outline").data((function(e){return[e]}));return n.enter().append("path").classed("outline",!0),n.attr("fill",(function(e){return t.style.forRelationship(e).get("color")})).attr("stroke","none"),n.exit().remove()},onTick:function(e){return e.selectAll("path").attr("d",(function(e){return e.arrow.outline(e.shortCaptionLength)}))}}),O=new y({name:"relationshipBg",onGraphChange:function(e,t){var n=e.selectAll("rect").data((function(e){return[e]}));return n.enter().append("rect"),n.exit().remove()},onTick:function(e,t){return e.selectAll("rect").attr("x",(function(e){return e.arrow.midShaftPoint.x-e.captionLength/2})).attr("width",(function(e){return e.captionLength})).attr("height",(function(e){return e.captionHeight+5})).attr("fill",(function(e){return e.isFilter?"url(#avatar)":"none"})).attr("y",(function(e){return e.arrow.midShaftPoint.y+parseFloat(t.style.forRelationship(e).get("font-size"))/2-1-(e.captionHeight+10)/2})).attr("transform",(function(e){return e.naturalAngle<90||e.naturalAngle>270?"rotate(180 ".concat(e.arrow.midShaftPoint.x," ").concat(e.arrow.midShaftPoint.y,")"):null}))}}),M=new y({name:"relationshipType",onGraphChange:function(e,t){var n=e.selectAll("text").data((function(e){return[e]}));return n.enter().append("text").attr({"text-anchor":"middle"}).attr({"pointer-events":"none"}),n.attr("font-size",(function(e){return t.style.forRelationship(e).get("font-size")})).attr("fill",(function(e){return e.isFilter?"white":t.style.forRelationship(e).get("text-color-".concat(e.captionLayout))})),n.exit().remove()},onTick:function(e,t){return e.selectAll("text").attr("x",(function(e){return e.arrow.midShaftPoint.x})).attr("y",(function(e){return e.arrow.midShaftPoint.y+parseFloat(t.style.forRelationship(e).get("font-size"))/2-1})).attr("transform",(function(e){return e.naturalAngle<90||e.naturalAngle>270?"rotate(180 ".concat(e.arrow.midShaftPoint.x," ").concat(e.arrow.midShaftPoint.y,")"):null})).text((function(e){return e.shortCaption}))}}),L=new y({name:"relationshipOverlay",onGraphChange:function(e){var t=e.selectAll("path.overlay").data((function(e){return[e]}));return t.enter().append("path").classed("overlay",!0),t.exit().remove()},onTick:function(e){return e.selectAll("path.overlay").attr("d",(function(e){return e.arrow.overlay(16)}))}}),A=[];A.push(x),A.push(w),A.push(k),A.push(C),A.push(b);var N=[];N.push(x),N.push(w),N.push(k),N.push(C);var R=[];R.push(j),R.push(O),R.push(M),R.push(b),R.push(L);var S=[];S.push(j),S.push(O),S.push(M),S.push(L);var F=function(){function e(t){var n=this;Object(c.a)(this,e),this.addExpandedNodes=function(e,t){for(var r=0,i=Array.from(t);r<i.length;r++){var o=i[r];null==n.findNode(o.id)&&(n.nodeMap[o.id]=o,n._nodes.push(o),n.expandedNodeMap[e.id]=n.expandedNodeMap[e.id]?n.expandedNodeMap[e.id].concat([o.id]):[o.id]),n.addNodesLabelsMap(o)}},this.collapseNode=function(e){n.expandedNodeMap[e.id]&&(n.expandedNodeMap[e.id].forEach((function(e){var t=n.nodeMap[e];n.collapseNode(t),n.removeConnectedRelationships(t),n.removeNode(t)})),n.expandedNodeMap[e.id]=[])},this.addNodes=this.addNodes.bind(this),this.removeNode=this.removeNode.bind(this),this.updateNode=this.updateNode.bind(this),this.removeConnectedRelationships=this.removeConnectedRelationships.bind(this),this.initConfig=t,this.resetGraph=this.resetGraph.bind(this),this.addRelationships=this.addRelationships.bind(this),this.addInternalRelationships=this.addInternalRelationships.bind(this),this.pruneInternalRelationships=this.pruneInternalRelationships.bind(this),this.findNode=this.findNode.bind(this),this.findNodeNeighbourIds=this.findNodeNeighbourIds.bind(this),this.findRelationship=this.findRelationship.bind(this),this.findAllRelationshipToNode=this.findAllRelationshipToNode.bind(this),this.nodeMap={},this.nodeLabelsMap={},this.relLabelsMap={},this.expandedNodeMap={},this._nodes=[],this.relationshipMap={},this._relationships=[],this.filterNodeByLabelMap={},this.filterRelByLabelMap={},this.isCtrlClick=!1}return Object(u.a)(e,[{key:"nodes",value:function(){return this._nodes}},{key:"relationships",value:function(){return this._relationships}},{key:"groupedRelationships",value:function(){for(var e={},t=0,n=Array.from(this._relationships);t<n.length;t++){var r=n[t],i=new E(r.source,r.target);(i=null!=e[i]?e[i]:i).relationships.push(r),e[i]=i}return function(){var t=[];for(var n in e){var r=e[n];t.push(r)}return t}()}},{key:"addNodes",value:function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];null==this.findNode(r.id)&&(this.nodeMap[r.id]=r,this._nodes=Object.values(this.nodeMap)),this.addNodesLabelsMap(r)}return this}},{key:"addNodesLabelsMap",value:function(e){var t=this;return e.labels.length>0&&e.labels.map((function(n){t.nodeLabelsMap[n]||(t.nodeLabelsMap[n]=[]),t.filterNodeByLabelMap[n]&&(e.display="hide"),t.nodeLabelsMap[n].push(e.id),t.nodeLabelsMap[n]=Object(g.a)(new Set(t.nodeLabelsMap[n]))})),this}},{key:"removeNode",value:function(e){return null!=this.findNode(e.id)&&(delete this.nodeMap[e.id],this._nodes.splice(this._nodes.indexOf(e),1)),this}},{key:"removeNodes",value:function(e,t){var n=this;t?t.map((function(e){n.nodeMap[e]&&(n.removeConnectedRelationships(n.nodeMap[e]),n.removeNode(n.nodeMap[e]))})):e.map((function(e){n.removeNode(e)}))}},{key:"removeNodeByLabels",value:function(e){var t=this,n=[];e.forEach((function(e){n=n.concat(t.nodeLabelsMap[e]),delete t.nodeLabelsMap[e]})),this.removeNodes(null,Object(g.a)(new Set(n)))}},{key:"removeRelByLabels",value:function(e){var t=this,n=[];e.forEach((function(e){n=n.concat(t.relLabelsMap[e]),delete t.relLabelsMap[e]})),this.removeRels(null,Object(g.a)(new Set(n)))}},{key:"removeRels",value:function(e,t){var n=this;t&&t.map((function(e){n.relationshipMap[e]&&n.removeRel(n.relationshipMap[e])}))}},{key:"toggleNodeBylabels",value:function(e){var t=this,n=Object.values(this.nodeMap);return e.forEach((function(e){t.isPro(t.filterNodeByLabelMap,e)?t.filterNodeByLabelMap[e]=!t.filterNodeByLabelMap:t.filterNodeByLabelMap[e]=!0,n.forEach((function(n){var r=n.display;-1!=n.labels.indexOf(e)&&(n.display=t.changeDisplay(r)),t.nodeMap[n.id]=n}))})),this._nodes=Object.values(n),this}},{key:"checkNodeExtendRelToggle",value:function(){var e=this;Object.values(this.relationshipMap).forEach((function(t){"hide"==t.target.display||"hide"==t.source.display||e.filterRelByLabelMap[t.type]?t.display="hide":e.filterRelByLabelMap[t.type]||(t.display="show"),e.relationshipMap[t.id]=t,e._relationships.splice(e._relationships.indexOf(t),1,t)}))}},{key:"isPro",value:function(e,t){return e.hasOwnProperty(t)}},{key:"changeDisplay",value:function(e){return"unvalue"==e||"show"==e?"hide":(e="hide")?"show":void 0}},{key:"toggleRelByLabels",value:function(e){var t=this,n=Object.values(this.relationshipMap);e.forEach((function(e){t.isPro(t.filterRelByLabelMap,e)?t.filterRelByLabelMap[e]=!t.filterRelByLabelMap[e]:t.filterRelByLabelMap[e]=!0,n.forEach((function(n){var r=t.changeDisplay(n.display);n.type==e&&(n.display=r,t.relationshipMap[n.id]=n,t._relationships.splice(t._relationships.indexOf(n),1,n))}))}))}},{key:"removeRel",value:function(e){return e&&this.relationshipMap[e.id]&&(delete this.relationshipMap[e.id],this._relationships.splice(this._relationships.indexOf(e),1)),this}},{key:"updateNode",value:function(e){return null!=this.findNode(e.id)&&(this.removeNode(e),e.expanded=!1,e.minified=!0,this.addNodes([e])),this}},{key:"updateNodeProps",value:function(e){return null!=this.findNode(e.id)&&(this.nodeMap[e.id]=Object.assign(this.nodeMap[e.id],e),this._nodes.splice(this._nodes.indexOf(e),this.nodeMap[e.id])),this}},{key:"updateRelProps",value:function(e){return null!=this.relationshipMap[e.id]&&(this.relationshipMap[e.id]=Object.assign(this.relationshipMap[e.id],e),this._relationships.splice(this._relationships.indexOf(e),1,this.relationshipMap[e.id])),this}},{key:"updateNodes",value:function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];this.nodeMap[r.id]=r,this._nodes=Object.values(this.nodeMap)}return this}},{key:"updateRelationships",value:function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];this.relationshipMap[r.id]=r,this._relationships=Object.values(this.relationshipMap)}return this}},{key:"removeConnectedRelationships",value:function(e){for(var t=0,n=Array.from(this.findAllRelationshipToNode(e));t<n.length;t++){var r=n[t];this.updateNode(r.source),this.updateNode(r.target),this._relationships.splice(this._relationships.indexOf(r),1),delete this.relationshipMap[r.id]}return this}},{key:"removeConnectedRelationshipss",value:function(e){var t=this;e.map((function(e){t.removeConnectedRelationships(e)}))}},{key:"gainRelByNode",value:function(e){var t=this,n=[],r=[],i={};return e.forEach((function(e){i[e]=!0})),e.forEach((function(e){t.findNode(e)&&n.push(t.findNode(e))})),this._relationships.forEach((function(e){i[e.source.id]&&i[e.target.id]&&r.push(e)})),{nodes:n,relationships:r}}},{key:"addRelationships",value:function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],i=this.findRelationship(r.id);this.addRelLabelsMap(r),null!=i?i.internal=!1:(r.internal=!1,this.relationshipMap[r.id]=r,this._relationships.push(r))}return this}},{key:"addRelLabelsMap",value:function(e){return e.type&&(this.relLabelsMap[e.type]||(this.relLabelsMap[e.type]=[]),this.filterRelByLabelMap[e.type]?e.display="hide":e.display="show",this.relLabelsMap[e.type].push(e.id),this.relLabelsMap[e.type]=Object(g.a)(new Set(this.relLabelsMap[e.type]))),this}},{key:"addInternalRelationships",value:function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];r.internal=!0,null==this.findRelationship(r.id)&&(this.relationshipMap[r.id]=r,this._relationships.push(r))}return this}},{key:"pruneInternalRelationships",value:function(){var e=this._relationships.filter((function(e){return!e.internal}));return this.relationshipMap={},this._relationships=[],this.addRelationships(e)}},{key:"findNode",value:function(e){return this.nodeMap[e]}},{key:"findNodeNeighbourIds",value:function(e){return this._relationships.filter((function(t){return t.source.id===e||t.target.id===e})).map((function(t){return t.target.id===e?t.source.id:t.target.id}))}},{key:"findRelationship",value:function(e){return this.relationshipMap[e]}},{key:"findAllRelationshipToNode",value:function(e){return this._relationships.filter((function(t){return t.source.id===e.id||t.target.id===e.id}))}},{key:"resetGraph",value:function(){return this.nodeMap={},this._nodes=[],this.relationshipMap={},this.filterRelByLabelMap={},this.filterNodeByLabelMap={},this.nodeLabelsMap={},this.relLabelsMap={},this.isCtrlClick=!1,this._relationships=[]}},{key:"initSeleced",value:function(){this.isCtrlClick=!1}}]),e}(),E=function(){function e(t,n){Object(c.a)(this,e),this.relationships=[],t.id<n.id?(this.nodeA=t,this.nodeB=n):(this.nodeA=n,this.nodeB=t)}return Object(u.a)(e,[{key:"isLoop",value:function(){return this.nodeA===this.nodeB}},{key:"toString",value:function(){return"".concat(this.nodeA.id,":").concat(this.nodeB.id)}}]),e}(),I=function(){function e(t,n,r,i){Object(c.a)(this,e),this.isNode=!0,this.isRelationship=!1,this.id=t,this.labels=[r.label_for_match],this.labelsAll=n,this.className=i,this.display="unvalue",this.isFilter=!1,this.propertyMap=r,this.propertyList=function(){for(var e=[],t=0,n=Object.keys(r||{});t<n.length;t++){var i=n[t],o=r[i];e.push({key:i,value:o})}return e}()}return Object(u.a)(e,[{key:"toJSON",value:function(){return this.propertyMap}},{key:"gainMaxLabel",value:function(e){if(1==e.length)return e;for(var t=["changed","added","deleted","Notupdated","cryptoRelated","UncryptoRelated","Tech"],n=0;n<e.length;n++){if("Capital"==e[n])return["Capital"];if("School"==e[n])return["School"];if("Project"==e[n])return["Project"];if("Person"==e[n])return["Person"];if(-1!=t.indexOf(e[n]))return[e[n]]}}},{key:"relationshipCount",value:function(e){for(var t=[],n=0,r=Array.from(e.relationships());n<r.length;n++){var i=r[n];i.source!==this&&i.target!==this||t.push(i)}return t.length}}]),e}(),B=function(){function e(t,n,r,i,o,a){var s=this;Object(c.a)(this,e),this.isNode=!1,this.isRelationship=!0,this.id=t,this.source=n,this.target=r,this.type=i,this.display="unvalue",this.className=a,this.propertyMap=o,this.propertyList=function(){for(var e=[],t=0,n=Object.keys(s.propertyMap||{});t<n.length;t++){var r=n[t],i=s.propertyMap[r];e.push({key:r,value:i})}return e}()}return Object(u.a)(e,[{key:"toJSON",value:function(){return this.propertyMap}},{key:"isLoop",value:function(){return this.source===this.target}}]),e}(),P=function(e){return Object.assign.apply(Object,[{}].concat(Object(g.a)(G(e))))},G=function(e){return Object.keys(e).map((function(t){return Object(f.a)({},t,Object(v.a)(e[t]))}))};function z(e){return e.map((function(e){return new I(e.id,e.labels,P(e.properties),e.className||"")}))}function T(e,t){return e.map((function(e){var n=t.findNode(e.startNodeId),r=t.findNode(e.endNodeId);return new B(e.id,n,r,e.type,P(e.properties),e.className)}))}function D(e){var t={},n={};return e.nodes().forEach((function(e){e.labels.forEach((function(n){t["*"]?t["*"].count=t["*"].count+1:t["*"]={count:1,properties:[]},t[n]?(t[n].count=t[n].count+1,t[n].properties=Object.assign({},t[n].properties,e.propertyMap)):t[n]={count:1,properties:e.propertyMap}}))})),e.relationships().forEach((function(e){n["*"]?n["*"].count=n["*"].count+1:n["*"]={count:1,properties:[]},n[e.type]?(n[e.type].count=n[e.type].count+1,n[e.type].properties=Object.assign({},n[e.type].properties,e.propertyMap)):n[e.type]={count:1,properties:e.propertyMap}})),{labels:t,relTypes:n}}var _=n(14),V=n.n(_),H=function(){function e(t,n,r,i,o,a,s){Object(c.a)(this,e),this.graph=t,this.graphView=n,this.getNodeNeighbours=r,this.selectedItem=null,this.rightClickedItem=null,this.onItemMouseOver=i,this.onItemSelected=o,this.onEventListener=s,this.onGraphModelChange=a,this.ctrlClickedArr=[],this.rightClickedMap={}}return Object(u.a)(e,[{key:"graphModelChanged",value:function(){this.onGraphModelChange(D(this.graph))}},{key:"resetEH",value:function(){this.ctrlClickedArr=[],this.rightClickedMap={},this.selectedItem=null,this.rightClickedItem=null}},{key:"selectItem",value:function(e){this.selectedItem&&(this.selectedItem.selected=!1),this.selectedItem=e,e.selected=!0,this.graphView.update()}},{key:"deselectItem",value:function(){var e=this.selectedItem||this.rightClickedItem;this.selectedItem&&(this.selectedItem.selected=!1,this.selectedItem=null),this.rightClickedItem&&(this.rightClickedItem.rightClicked=!1,this.rightClickedItem=null),this.onItemSelected({type:"canvas",item:{nodeCount:this.graph.nodes().length,relationshipCount:this.graph.relationships().length}}),e&&this.graphView.update()}},{key:"clearSelected",value:function(){this.selectedItem&&(this.selectedItem.selected=!1,this.selectedItem=null),this.graphView.update()}},{key:"clearRightSelected",value:function(){this.rightClickedItem&&(this.rightClickedItem.rightClicked=!1,this.rightClickedItem=null),this.graphView.update()}},{key:"nodeClose",value:function(e){this.graph.removeConnectedRelationships(e),this.graph.removeNode(e),this.deselectItem(),this.graphView.update(),this.graphModelChanged()}},{key:"nodeClicked",value:function(e){e&&(e.rightClicked&&(e.rightClicked=!1),e.fixed=!0,e.selected?this.deselectItem():(this.selectItem(e),this.onItemSelected({type:"node",item:{id:e.id,labels:e.labels,properties:e.propertyList,layerX:e.px,layerY:e.py}})),this.onEventListener({type:"nodeClicked",item:e}))}},{key:"onNodeCtrlClick",value:function(e){e&&(e.ctrlClicked?(e.ctrlClicked=!1,this.ctrlClickedArr=this.ctrlClickedArr.filter((function(t){return t.id!=e.id}))):(e.ctrlClicked=!0,this.ctrlClickedArr.push(e.id)),this.onEventListener({type:"nodeCtrlClicked",item:e}),this.clearSelected(),this.clearRightSelected())}},{key:"onNodeClickRight",value:function(e){e&&(e.selected&&(e.selected=!1),this.rightClickedItem&&this.rightClickedItem.rightClicked&&(this.rightClickedItem.rightClicked=!1),this.rightClickedItem=e,e.rightClicked?e.rightClicked=!1:(e.rightClicked=!0,this.rightClickedMap[e.id]=e),this.onEventListener({type:"nodeRightClicked",item:e}),this.clearSelected())}},{key:"nodeUnlock",value:function(e){e&&(e.fixed=!1,this.deselectItem())}},{key:"nodeDelete",value:function(e){this.onEventListener({type:"nodeDelete",item:e})}},{key:"nodeNew",value:function(e){this.onEventListener({type:"nodeNew",item:e})}},{key:"nodeEdit",value:function(e){this.onEventListener({type:"nodeEdit",item:e})}},{key:"nodeDblClicked",value:function(e){e.expanded?(this.nodeCollapse(e),e.expanded=!1):e.expanded=!0,this.onEventListener({type:"nodeDbClicked",item:e})}},{key:"nodeCollapse",value:function(e){e.expanded=!1,this.graph.collapseNode(e),this.graphView.update(),this.graphModelChanged()}},{key:"onNodeMouseOver",value:function(e){e.contextMenu||this.onItemMouseOver({type:"node",item:{id:e.id,labels:e.labels,properties:e.propertyList}}),this.hoveredItem&&(this.hoveredItem.hovered=!1),this.onEventListener({type:"nodeMouseOver",item:e}),this.hoveredItem=e,e.hovered=!0}},{key:"onMenuMouseOver",value:function(e){this.onItemMouseOver({type:"context-menu-item",item:{label:e.contextMenu.label,content:e.contextMenu.menuContent,selection:e.contextMenu.menuSelection}}),this.onEventListener({type:"menuMouseOver",item:e})}},{key:"onRelationshipMouseOver",value:function(e){this.onItemMouseOver({type:"relationship",item:{id:e.id,type:e.type,properties:e.propertyList}}),this.onEventListener({type:"relationshipMouseOver",item:e})}},{key:"onRelationshipClicked",value:function(e){e.selected?this.deselectItem():(this.selectItem(e),this.onItemSelected({type:"relationship",item:{id:e.id,type:e.type,properties:e.propertyList}})),this.onEventListener({type:"relationshipClicked",item:e})}},{key:"onCanvasClicked",value:function(){this.onEventListener({type:"canvasClicked",item:null}),this.deselectItem()}},{key:"onItemMouseOut",value:function(e){this.onItemMouseOver({type:"canvas",item:{nodeCount:this.graph.nodes().length,relationshipCount:this.graph.relationships().length}}),this.onEventListener({type:"canvasMouseOver",item:e})}},{key:"onContrarySelected",value:function(e){this.onEventListener({type:"contrarySelected",item:e}),this.deselectItem()}},{key:"onClearSelected",value:function(e){this.onEventListener({type:"clearSelected",item:e}),this.deselectItem()}},{key:"onBackStatus",value:function(e){this.onEventListener({type:"backStatus",item:e}),this.deselectItem()}},{key:"onInitStatus",value:function(e){this.onEventListener({type:"initStatus",item:e})}},{key:"onStartFrame",value:function(e){console.log(this.graph),this.graph.resetGraph(),this.graphView.update(),this.onEventListener({type:"startFrame",item:this.ctrlClickedArr})}},{key:"onMadeChart",value:function(e){this.onEventListener({type:"madeChart",item:this.ctrlClickedArr}),this.deselectItem()}},{key:"onAddRel",value:function(e){this.onEventListener({type:"addRel",item:e}),this.deselectItem()}},{key:"bindEventHandlers",value:function(){this.graphView.on("nodeMouseOver",this.onNodeMouseOver.bind(this)).on("nodeMouseOut",this.onItemMouseOut.bind(this)).on("menuMouseOver",this.onMenuMouseOver.bind(this)).on("menuMouseOut",this.onItemMouseOut.bind(this)).on("relMouseOver",this.onRelationshipMouseOver.bind(this)).on("relMouseOut",this.onItemMouseOut.bind(this)).on("relationshipClicked",this.onRelationshipClicked.bind(this)).on("canvasClicked",this.onCanvasClicked.bind(this)).on("nodeClose",this.nodeClose.bind(this)).on("nodeClicked",this.nodeClicked.bind(this)).on("nodeDblClicked",this.nodeDblClicked.bind(this)).on("nodeUnlock",this.nodeUnlock.bind(this)).on("nodeDelete",this.nodeDelete.bind(this)).on("nodeNew",this.nodeNew.bind(this)).on("nodeEdit",this.nodeEdit.bind(this)).on("nodeCtrlClick",this.onNodeCtrlClick.bind(this)).on("nodeClickRight",this.onNodeClickRight.bind(this)).on("contrarySelected",this.onContrarySelected.bind(this)).on("clearSelected",this.onClearSelected.bind(this)).on("backStatus",this.onBackStatus.bind(this)).on("initStatus",this.onInitStatus.bind(this)).on("startFrame",this.onStartFrame.bind(this)).on("madeChart",this.onMadeChart.bind(this)).on("addRel",this.onAddRel.bind(this)),this.onItemMouseOut()}}]),e}();V.a.selection.enter.prototype.appendSVG=function(e){return this.select((function(){return this.appendChild(document.importNode((new DOMParser).parseFromString(e,"application/xml").documentElement.firstChild,!0))}))};var U=n(92),Y=n.n(U),Q=function(e,t,n){var r=W(t),i=V.a.select(document.createElementNS("http://www.w3.org/2000/svg","svg"));switch(i.append("title").text("Neo4j Graph Visualization"),i.append("desc").text("Created using Neo4j (http://www.neo4j.com/)"),n){case"plan":i=q(e,i);break;case"graph":default:i=J(e,i)}return i.selectAll(".overlay, .ring").remove(),i.selectAll(".context-menu-item").remove(),i.selectAll("text").attr("font-family","sans-serif"),i.attr("width",r.width),i.attr("height",r.height),i.attr("viewBox",r.viewBox),i},W=function(e){var t;return{width:(t=e.boundingBox()).width,height:t.height,viewBox:[t.x,t.y,t.width,t.height].join(" ")}},J=function(e,t){return window.d3.select(e).selectAll("g.layer").each((function(e){t.node().appendChild(window.d3.select(this).node().cloneNode(!0))})),t},q=function(e,t){return window.d3.select(e).selectAll("g.layer").each((function(e){t.node().appendChild(window.d3.select(this).node().cloneNode(!0))})),t},Z=n(101),X=n.n(Z),K=function(e,t){var n,r,i,o,a,s;for(n=null,n=t.split(",")[0].indexOf("base64")>=0?window.atob(t.split(",")[1]):unescape(t.split(",")[1]),a=t.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(n.length),r=o=0,s=n.length;s>=0?o<=s:o>=s;r=s>=0?++o:--o)i[r]=n.charCodeAt(r);return new Blob([i],{type:a})},$=function(e){return(new window.XMLSerializer).serializeToString(e).replace(/&nbsp;/g,"&#160;")},ee=function(e,t,n){var r=new Blob([n],{type:t});return X.a.saveAs(r,e)},te=function(e,t){var n,r,i,o,a,s;for(n=null,n=t.split(",")[0].indexOf("base64")>=0?window.atob(t.split(",")[1]):unescape(t.split(",")[1]),a=t.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(n.length),r=o=0,s=n.length;s>=0?o<=s:o>=s;r=s>=0?++o:--o)i[r]=n.charCodeAt(r);return ee(e,a,i)};function ne(){var e={node:{diameter:"60px",color:"#f9d684","border-color":"#f9d684","border-width":"2px","text-color-internal":"#454545","font-size":"10px"},"node.changed":{diameter:"25px",color:"#adadad","border-color":"#adadad","border-width":"2px","text-color-internal":"#454545","font-size":"10px"},"node.cryptoRelated":{diameter:"25px",color:"#adadad","border-color":"#adadad","border-width":"2px","text-color-internal":"#454545","font-size":"10px"},"node.UncryptoRelated":{diameter:"25px",color:"#adadad","border-color":"#adadad","border-width":"2px","text-color-internal":"#454545","font-size":"10px"},relationship:{color:"#A5ABB6","shaft-width":"1px","font-size":"8px",padding:"3px","text-color-external":"#000000","text-color-internal":"#FFFFFF",caption:"<type>"},"node.Project":{color:"#346894","border-color":"#346894","text-color-internal":"#FFFFFF",defaultCaption:"<id>",diameter:"65px",caption:"{name}"},"node.Sector":{color:"#a75a29","border-color":"#a75a29","text-color-internal":"#ffffff",defaultCaption:"<id>",diameter:"80px"},"node.Capital":{color:"#09274b","border-color":"#09274b","text-color-internal":"#FFFFFF",defaultCaption:"<id>",diameter:"65px"},"node.Token":{color:"#346894","border-color":"#346894","text-color-internal":"#FFFFFF",defaultCaption:"<id>",diameter:"50px"},".node.Person":{color:"#d79d53","border-color":"#d79d53","text-color-internal":"#1c1c1c",defaultCaption:"<id>",caption:"{name}",diameter:"50px"},"node.School":{caption:"{name}",diameter:"80px",color:"#604740","border-color":"#604740","text-color-internal":"#ffffff"},"node.FundingRound":{caption:"{name}",diameter:"35px",color:"#a0a0a0","border-color":"#a0a0a0","text-color-internal":"#ffffff"}},t=[{diameter:"10px"},{diameter:"20px"},{diameter:"50px"},{diameter:"65px"},{diameter:"80px"}],n=[{"icon-code":"a"},{"icon-code":'"'},{"icon-code":"z"},{"icon-code":"_"},{"icon-code":"/"},{"icon-code":">"},{"icon-code":"k"}],r=[{"shaft-width":"1px"},{"shaft-width":"2px"},{"shaft-width":"3px"},{"shaft-width":"5px"},{"shaft-width":"8px"},{"shaft-width":"13px"},{"shaft-width":"25px"},{"shaft-width":"38px"}],i=[{color:"#FFE081","border-color":"#9AA1AC","text-color-internal":"#FFFFFF"},{color:"#C990C0","border-color":"#b261a5","text-color-internal":"#FFFFFF"},{color:"#F79767","border-color":"#f36924","text-color-internal":"#FFFFFF"},{color:"#57C7E3","border-color":"#23b3d7","text-color-internal":"#FFFFFF"},{color:"#F16667","border-color":"#eb2728","text-color-internal":"#FFFFFF"},{color:"#D9C8AE","border-color":"#c0a378","text-color-internal":"#604A0E"},{color:"#8DCC93","border-color":"#5db665","text-color-internal":"#604A0E"},{color:"#ECB5C9","border-color":"#da7298","text-color-internal":"#604A0E"},{color:"#4C8EDA","border-color":"#2870c2","text-color-internal":"#FFFFFF"},{color:"#FFC454","border-color":"#d7a013","text-color-internal":"#604A0E"},{color:"#DA7194","border-color":"#cc3c6c","text-color-internal":"#FFFFFF"},{color:"#569480","border-color":"#447666","text-color-internal":"#FFFFFF"}],o=function(){function e(e,t){this.tag=e,this.classes=null!=t?t:[]}return e.prototype.toString=function(){return[this.tag].concat(this.classes).map((function(e){return e.replace(/\./g,"\\.")})).join(".")},e}(),a=function(){function e(e,t){this.selector=e,this.props=t}return e.prototype.matches=function(e){if(this.selector.tag!==e.tag)return!1;for(var t=0;t<this.selector.classes.length;t++){var n=this.selector.classes[t];if(null!=n&&-1===e.classes.indexOf(n))return!1}return!0},e.prototype.matchesExact=function(e){return this.matches(e)&&this.selector.classes.length===e.classes.length},e}(),c=function(){function e(e){this.selector=e,this.props={}}return e.prototype.applyRules=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.matches(this.selector)&&(this.props=Object(l.a)(Object(l.a)({},this.props),r.props),this.props.caption=this.props.caption||this.props.defaultCaption)}return this},e.prototype.get=function(e){return this.props[e]||""},e}();return new(function(){function u(){this.rules=[];try{this.loadRules()}catch(e){}}var h=function(e){var t=function(e){e=e.split("").reverse().join("");for(var t,n=/(.+?)(?!\.\\)(?:\.|$)/g,r=[];null!==(t=n.exec(e));){var i=t[1].split("").reverse().join("");r.push(i)}return r.filter((function(e){return e})).reverse().map((function(e){return e.replace(/\\./g,".")}))}(e);return new o(t[0],t.slice(1))},d=function(e){var t=null!=(e=e||{}).labels?e.labels:[];return new o("node",t)},p=function(e){var t=null!=(e=e||{}).type?[e.type]:[];return new o("relationship",t)};return u.prototype.calculateStyle=function(e,t){return new c(e).applyRules(this.rules,t)},u.prototype.setDefaultNodeStyling=function(e,t){for(var n=!0,r=!0,a=0;a<this.rules.length;a++){var s=this.rules[a];s.selector.classes.length>0&&s.matches(e)&&(s.props.hasOwnProperty("color")&&(n=!1),s.props.hasOwnProperty("caption")&&(r=!1))}var l=new o(e.tag,e.classes.sort().slice(0,1));if(n&&this.changeForSelector(l,function(e){var t=e.filter((function(e){return null!=e.props.color})).map((function(e){return e.props.color})),n=t.length-1>i?0:t.length-1;return i[n]}(this.rules)),r)return this.changeForSelector(l,function(e){if(!e||!(null!=e.propertyList&&e.propertyList.length)>0)return{defaultCaption:"<id>"};var t=[/^name$/i,/^title$/i,/^label$/i,/name$/i,/description$/i,/^.+/].reduceRight((function(t,n){var r=e.propertyList.filter((function(e){return n.test(e.key)}));return r.length?"{"+r[0].key+"}":t}),"");return t||(t="<id>"),{caption:t}}(t))},u.prototype.changeForSelector=function(e,t){var n=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.matchesExact(e))return r}}(e,this.rules);return null==n&&(n=new a(e,t),this.rules.push(n)),n.props=Object(l.a)(Object(l.a)({},n.props),t),n},u.prototype.destroyRule=function(e){var t=this.rules.indexOf(e);null!=t&&this.rules.splice(t,1)},u.prototype.importGrass=function(e){try{var t=this.parse(e);return this.loadRules(t)}catch(n){}},u.prototype.parse=function(e){for(var t=e.split(""),n=!1,r=!1,i="",o="",a={},l=0;l<t.length;l++){var c=t[l],u=!0;switch(c){case"{":n?u=!1:r=!0;break;case"}":n?u=!1:(r=!1,a[i]=o,i="",o="");break;case"'":n^=!0;break;default:u=!1}u||(r?o+=c:c.match(/[\s\n]/)||(i+=c))}var h=function(e){var t=a[e];a[e]={},t.split(";").forEach((function(t){var n=t.split(":"),r=Object(s.a)(n,2),i=r[0],o=r[1];i&&o&&(a[e][i.trim()]=o.trim())}))};for(var d in a)h(d);return a},u.prototype.resetToDefault=function(){return this.loadRules(),!0},u.prototype.toSheet=function(){var e={};return this.rules.forEach((function(t){e[t.selector.toString()]=t.props})),e},u.prototype.toString=function(){var e="";return this.rules.forEach((function(t){for(var n in e+=t.selector.toString()+" {\n",t.props){var r=t.props[n];"caption"===n&&(r="'"+r+"'"),e+="  "+n+": "+r+";\n"}e+="}\n\n"})),e},u.prototype.loadRules=function(t){for(var n in"object"!==typeof t&&(t=e),this.rules.length=0,t){var r=t[n];this.rules.push(new a(h(n),r))}return this},u.prototype.defaultSizes=function(){return t},u.prototype.defaultIconCodes=function(){return n},u.prototype.defaultArrayWidths=function(){return r},u.prototype.defaultColors=function(){return i},u.prototype.interpolate=function(e,t){var n=e.replace(/\{([^{}]*)\}/g,(function(e,n){var r=t.propertyMap[n];return"object"===typeof r?r.join(", "):"string"===typeof r||"number"===typeof r?r:""}));return n.length<1&&"{type}"===e&&t.isRelationship&&(n="<type>"),n.length<1&&"{id}"===e&&t.isNode&&(n="<id>"),n.replace(/^<(id|type)>$/,(function(e,n){var r=t[n];return"string"===typeof r||"number"===typeof r?r:""}))},u.prototype.forNode=function(e){var t=d(e=e||{});return(null!=e.labels?e.labels.length:0)>0&&this.setDefaultNodeStyling(t,e),this.calculateStyle(t,e)},u.prototype.forRelationship=function(e){var t=p(e);return this.calculateStyle(t,e)},u}())}var re,ie,oe,ae,se,le,ce,ue,he,de,pe,fe,ge,ve,ye,me,be,xe,ke,we,Ce,je,Oe,Me,Le,Ae,Ne,Re,Se,Fe,Ee,Ie,Be,Pe,Ge=39,ze=39,Te=n(16),De=n(17),_e=De.a.div(re||(re=Object(Te.a)(["\n  line-height: 0;\n  height: 100%;\n  position: relative;\n  > svg {\n    height: 100%;\n    width: 100%;\n    background-color: ",";\n    .node {\n      cursor: pointer;\n      > .ring {\n        fill: none;\n        opacity: 0;\n        stroke: #6ac6ff;\n      }\n      .outline {\n        cursor: pointer;\n      }\n      &.selected {\n        > .ring {\n          stroke: #fdcc59;\n          opacity: 0.3;\n        }\n      }\n      &:hover {\n        > .ring {\n          stroke: #6ac6ff;\n          opacity: 0.3;\n        }\n      }\n    }\n    .nodes.ctrlClick{\n      .node{\n        opacity : 0.3\n      }\n      .ctrlClicked{\n        opacity : 1\n      }\n    }\n    .nodes{\n      .hide{\n        opacity : 0 !important;\n        cursor : auto !important;  \n        &.outline {\n          cursor: auto !important;\n        }\n        .outline {\n          cursor: auto !important;\n        }\n        &:hover {\n          > .ring {\n            stroke: #6ac6ff !important;\n            opacity: 0 !important;\n          }\n        }\n      }\n    }\n    .relationship {\n      > .overlay {\n        opacity: 0;\n        fill: #6ac6ff;\n      }\n      &.selected {\n        > .overlay {\n          fill: #fdcc59;\n          opacity: 0.3;\n        }\n      }\n      %.\n      &:hover {\n        > .overlay {\n          fill: #6ac6ff;\n          opacity: 0.3;\n        }\n      }\n      &.hide {\n        opacity : 0;\n        &:hover{\n          > .overlay {\n            fill: #6ac6ff;\n            opacity: 0;\n          }\n        }\n      }\n    }\n    .right-menu{\n      position : absolute;\n      z-index : 10;\n      .right-menu-text{\n          font-size : 10px;\n          fill : #666;\n          dominant-baseline: middle; \n          &:hover{\n            fill : rgb(87,199,227)\n            cursor: pointer;\n          }\n      }\n      rect:hover{\n        cursor: pointer;\n        .right-menu-text{\n          fill : rgb(87,199,227)\n        }\n      }\n      &:hover{\n        .right-menu-text{\n          cursor: pointer;\n          fill : rgb(87,199,227)\n        }\n      }\n    }\n    .remove_node {\n      .expand_node {\n        &:hover {\n          border: 2px #000 solid;\n        }\n      }\n    }\n    path {\n      &.context-menu-item {\n        stroke-width: 2px;\n        fill: #d2d5da;\n      }\n    }\n    text {\n      line-height: normal;\n      &.context-menu-item {\n        fill: #fff;\n        text-anchor: middle;\n        pointer-events: none;\n        font-size: 14px;\n      }\n    }\n    .context-menu-item {\n      cursor: pointer;\n      &:hover {\n        fill: #b9b9b9;\n        font-size: 14px;\n      }\n    }\n  }\n"])),(function(e){return function(e,t){var n={normal:{svgBackground:"#f9fbfd"},dark:{svgBackground:"#5a6070"}};return void 0===n[e]&&(e="normal"),n[e][t]||""}(e.theme.name,"svgBackground")})),Ve=(De.a.div(ie||(ie=Object(Te.a)(["\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  margin-top: 17px;\n"]))),De.a.div(oe||(oe=Object(Te.a)(["\n  margin-top: ","px;\n  font-size: 12px;\n  width: 100%;\n  white-space: normal;\n"])),6),De.a.div(ae||(ae=Object(Te.a)(["\n  float: right;\n  display: block;\n  width: 21px;\n  height: 21px;\n  line-height: 21px;\n  text-align: center;\n  cursor: pointer;\n"]))),De.a.div(se||(se=Object(Te.a)(["\n  font-size: 17px;\n  vertical-align: middle;\n"]))),De.a.div(le||(le=Object(Te.a)(["\n  margin-top: 6px;\n  font-size: 12px;\n  width: 100%;\n  white-space: normal;\n  overflow: scroll;\n  &.contracted {\n    overflow: hidden;\n  }\n"]))),De.a.ul(ce||(ce=Object(Te.a)(["\n  list-style: none;\n  word-break: break-word;\n  line-height: 21px;\n"]))),De.a.div(ue||(ue=Object(Te.a)(["\n  float: left;\n  font-weight: 800;\n"]))),De.a.div(he||(he=Object(Te.a)(["\n  padding-left: 3px;\n  overflow: hidden;\n  float: left;\n  white-space: pre-wrap;\n"]))),De.a.ul(de||(de=Object(Te.a)(["\n  padding-left: 0;\n  list-style: none;\n  word-break: break-word;\n"])))),He=De.a.li(pe||(pe=Object(Te.a)(["\n  display: inline-block;\n  padding-right: 5px;\n  padding-left: 5px;\n"]))),Ue=(De.a.div(fe||(fe=Object(Te.a)(["\n  height: 68px;\n  display: none;\n"]))),De.a.div(ge||(ge=Object(Te.a)(["\n  min-height: 39px;\n  line-height: 39px;\n  color: ",";\n  font-size: 13px;\n  position: absolute;\n  background-color: ",";\n  white-space: nowrap;\n  overflow: hidden;\n  border-top: 1px solid #e6e9ef;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"])),(function(e){return e.theme.secondaryText}),(function(e){return e.theme.secondaryBackground})),De.a.div(ve||(ve=Object(Te.a)(["\n  position: relative;\n  float: left;\n  padding-left: 16px;\n  margin-top: 0;\n  margin-bottom: 0;\n  width: 100%;\n  margin-top: 3px;\n  overflow: auto;\n"]))),Object(De.a)(He)(ye||(ye=Object(Te.a)(["\n  vertical-align: middle;\n  font-size: 13px;\n"]))),Object(De.a)(He)(me||(me=Object(Te.a)(["\n  display: inline-block;\n  font-weight: bold;\n  line-height: 1em;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: baseline;\n  user-select: none;\n  font-size: 12px;\n  margin-right: 5px;\n  cursor: pointer;\n"])))),Ye=Object(De.a)(Ue)(be||(be=Object(Te.a)(["\n  padding: 4px 7px 4px 9px;\n  border-radius: 20px;\n"]))),Qe=(Object(De.a)(Ue)(xe||(xe=Object(Te.a)(["\n  padding: 4px 7px 4px 5px;\n  border-radius: 3px;\n"]))),Object(De.a)(Ue)(ke||(ke=Object(Te.a)(["\n  padding: 3px 5px 3px 5px;\n"]))),Object(De.a)(Ye)(we||(we=Object(Te.a)(["\n  color: #f9fbfd;\n  background-color: #d2d5da;\n  padding: 4px 9px;\n"]))),De.a.span(Ce||(Ce=Object(Te.a)(["\n  font-weight: normal;\n"]))),De.a.ul(je||(je=Object(Te.a)(["\n  float: left;\n  line-height: 1em;\n  position: relative;\n  top: 3px;\n  top: -1px;\n"]))),De.a.div(Oe||(Oe=Object(Te.a)(["\n  border-bottom: 1px solid #e6e9ef;\n  &.contracted {\n    overflow: hidden;\n  }\n"]))),De.a.div(Me||(Me=Object(Te.a)(["\n  background-color: ",";\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  right: 0;\n  left: 0;\n"])),(function(e){return e.theme.secondaryBackground})),Object(De.a)(Ve)(Le||(Le=Object(Te.a)(["\n  padding: 7px 9px 0px 10px;\n"]))),Object(De.a)(He)(Ae||(Ae=Object(Te.a)(["\n  display: inline-block;\n  margin-bottom: 3px;\n"]))),Object(De.a)(He)(Ne||(Ne=Object(Te.a)(["\n  padding-right: 5px;\n  padding-left: 0;\n  vertical-align: middle;\n  line-height: 0;\n"]))),De.a.a(Re||(Re=Object(Te.a)(["\n  background-color: #aaa;\n  display: inline-block;\n  height: 12px;\n  width: 12px;\n  margin-top: 1px;\n  line-height: 0;\n  cursor: pointer;\n  opacity: 0.4;\n  &:hover {\n    opacity: 1;\n  }\n  &.active {\n    opacity: 1;\n  }\n"])))),We=(Object(De.a)(Qe)(Se||(Se=Object(Te.a)(["\n  border-radius: 50%;\n"]))),De.a.a(Fe||(Fe=Object(Te.a)(["\n  cursor: pointer;\n  user-select: none;\n  display: inline-block;\n  padding: 1px 6px;\n  font-size: 12px;\n  line-height: 1em;\n  color: #9195a0;\n  border: 1px solid #9195a0;\n  overflow: hidden;\n  border-radius: 0.25em;\n  margin-right: 0;\n  font-weight: bold;\n  &:hover {\n    border-color: #aaa;\n    color: #aaa;\n    text-decoration: none;\n  }\n  &.active {\n    color: white;\n    background-color: #9195a0;\n  }\n"]))),De.a.div(Ee||(Ee=Object(Te.a)(["\n  position: relative;\n  height: 100%;\n"]))),De.a.div(Ie||(Ie=Object(Te.a)(["\n  font-weight: bold;\n"]))),De.a.div(Be||(Be=Object(Te.a)(["\n  position: absolute;\n  bottom: 39px;\n  right: 0;\n  padding: 6px 6px 0 6px;\n  border-left: #e6e9ef solid 1px;\n  border-top: #e6e9ef solid 1px;\n  background: #fff;\n"]))),De.a.button(Pe||(Pe=Object(Te.a)(["\n  display: list-item;\n  list-style-type: none;\n  font-size: 2em;\n  margin-bottom: 10px;\n  border: none;\n  color: #9b9da2;\n  background: transparent;\n  border-color: black;\n  padding: 2px 6px 3px;\n  &:hover {\n    color: black;\n  }\n  &:focus {\n    outline: none;\n  }\n  &.faded {\n    opacity: 0.3;\n    cursor: auto;\n    &:hover {\n      color: #9b9da2;\n    }\n  }\n"]))),function(e,t,n){var r="normal normal normal ".concat(n,"px/normal ").concat(t);return function(){var e={},t=[];return function(n,r){var i=e[n];if(i)return i;var o=r();return t.length>1e4&&(delete e[t.splice(0,1)],t.push(n)),e[n]=o}}()(e+r,(function(){return function(e,t){var n=V.a.select("canvas#textMeasurementCanvas").data([this]);n.enter().append("canvas").attr("id","textMeasurementCanvas").style("display","none");var r=n.node().getContext("2d");return r.font=t,r.measureText(e).width}(e,r)}))}),Je=function e(t,n,r,i,o,a,s){Object(c.a)(this,e);var l=r*Math.PI/180,h=t,d=t+a,p=t+n,f=p*Math.tan(l/2),g=i/2;this.shaftLength=3*f+i;var v=function(){function e(t,n){Object(c.a)(this,e),this.x=t,this.y=n}return Object(u.a)(e,[{key:"toString",value:function(){return"".concat(this.x," ").concat(this.y)}}]),e}(),y=function(e,t,n){var r=t*Math.tan(l/2),i=t/Math.cos(l/2);return new v((r+n)*Math.sin(e),i+(r+n)*Math.cos(e))};this.midShaftPoint=y(0,p,g+s/2+2);var m=function(e,t){return y((Math.PI+l)/2,e,t)},b=function(e,t){return y(-(Math.PI+l)/2,e,t)};this.outline=function(){var e=f-g,t=f+g;return["M",m(h,g),"L",m(p,g),"A",t,t,0,1,1,b(p,g),"L",b(d,g),"L",b(d,-o/2),"L",b(h,0),"L",b(d,o/2),"L",b(d,-g),"L",b(p,-g),"A",e,e,0,1,0,m(p,-g),"L",m(h,-g),"Z"].join(" ")},this.overlay=function(e){var t=Math.max(e/2,g),n=f-t,r=f+t;return["M",m(h,t),"L",m(p,t),"A",r,r,0,1,1,b(p,t),"L",b(d,t),"L",b(d,-t),"L",b(p,-t),"A",n,n,0,1,0,m(p,-t),"L",m(h,-t),"Z"].join(" ")}},qe=function e(t,n,r,i,o,a,s){Object(c.a)(this,e),this.deflection=0,this.length=r-(t+n),this.shaftLength=this.length-a;var l=t,u=l+this.shaftLength,h=l+this.length,d=i/2,p=o/2;this.midShaftPoint={x:l+this.shaftLength/2,y:0},this.outline=function(e){if("external"===s){var t=l+(this.shaftLength-e)/2,n=u-(this.shaftLength-e)/2;return["M",l,d,"L",t,d,"L",t,-d,"L",l,-d,"Z","M",n,d,"L",u,d,"L",u,p,"L",h,0,"L",u,-p,"L",u,-d,"L",n,-d,"Z"].join(" ")}return["M",l,d,"L",u,d,"L",u,p,"L",h,0,"L",u,-p,"L",u,-d,"L",l,-d,"Z"].join(" ")},this.overlay=function(e){var t=Math.max(e/2,d);return["M",l,t,"L",h,t,"L",h,-t,"L",l,-t,"Z"].join(" ")}},Ze=function e(t,n,r,i,o,a,s,l){Object(c.a)(this,e),this.deflection=i;var u=function(e){return e*e},h=this.deflection*Math.PI/180,d={x:Math.cos(h)*t,y:Math.sin(h)*t},p=t/(n+s),f=-r*p/(1-p),g=function(e,t,n,r){var i=e.y/(e.x-f),o=e.y-i*e.x,a=1+u(i),s=2*(i*o-n),l=u(o)+u(n)-u(t),c={x:(-s+r*Math.sqrt(u(s)-4*a*l))/(2*a)};return c.y=(c.x-f)*i,c}(d,n+s,r,-1),v=-d.x/d.y,y=d.y+u(d.x)/d.y,m=-(g.x-r)/g.y,b=(y-(g.y+(g.x-r)*g.x/g.y))/(m-v),x=v*b+y,k=Math.sqrt(u(b-d.x)+u(x-d.y)),w=Math.atan2(d.x-b,x-d.y),C=Math.atan2(g.x-b,x-g.y),j=C-w;this.deflection>0&&(j=2*Math.PI-j),this.shaftLength=j*k,w>C&&(this.shaftLength=0);var O=(w+C)/2;this.deflection>0&&(O+=Math.PI),this.midShaftPoint={x:b+k*Math.sin(O),y:x-k*Math.cos(O)};var M=function(e){var t=(e<0?1:-1)*Math.sqrt(u(e)/(1+u(v)));return{x:d.x+t,y:d.y+v*t}},L=function(e){var t=(e<0?-1:1)*Math.sqrt(u(e)/(1+u(m))),n=m*t;return{x:g.x+t,y:g.y+n}},A=function(e,t){return{x:b+(k+t)*Math.sin(e),y:x-(k+t)*Math.cos(e)}},N=function(e){var t=(e<0?-1:1)*Math.sqrt(u(e)/(1+u(1/m))),n=t/m;return{x:g.x+t,y:g.y-n}},R=function(e,t){var n=L(e),r=N(t);return{x:n.x+r.x-g.x,y:n.y+r.y-g.y}},S=function(e){return"".concat(e.x,",").concat(e.y)},F=o/2,E=a/2,I=d.y>0?0:1,B=d.y<0?0:1;this.outline=function(e){if(w>C)return["M",S(L(-E)),"L",S(N(s)),"L",S(L(E)),"Z"].join(" ");if("external"===l){var t=e/k;this.deflection>0&&(t*=-1);var n=O-t/2,r=O+t/2;return["M",S(M(F)),"L",S(M(-F)),"A",k-F,k-F,0,0,I,S(A(n,-F)),"L",S(A(n,F)),"A",k+F,k+F,0,0,B,S(M(F)),"Z","M",S(A(r,F)),"L",S(A(r,-F)),"A",k-F,k-F,0,0,I,S(L(-F)),"L",S(L(-E)),"L",S(N(s)),"L",S(L(E)),"L",S(L(F)),"A",k+F,k+F,0,0,B,S(A(r,F))].join(" ")}return["M",S(M(F)),"L",S(M(-F)),"A",k-F,k-F,0,0,I,S(L(-F)),"L",S(L(-E)),"L",S(N(s)),"L",S(L(E)),"L",S(L(F)),"A",k+F,k+F,0,0,B,S(M(F))].join(" ")},this.overlay=function(e){var t=Math.max(e/2,F);return["M",S(M(t)),"L",S(M(-t)),"A",k-t,k-t,0,0,I,S(L(-t)),"L",S(R(-t,s)),"L",S(R(t,s)),"L",S(L(t)),"A",k+t,k+t,0,0,B,S(M(t))].join(" ")}},Xe=function(){function e(t){Object(c.a)(this,e),this.style=t}return Object(u.a)(e,[{key:"measureRelationshipCaption",value:function(e,t){var n=parseFloat(this.style.forRelationship(e).get("padding"));return We(t,"sans-serif",e.captionHeight)+2*n}},{key:"captionFitsInsideArrowShaftWidth",value:function(e){return parseFloat(this.style.forRelationship(e).get("shaft-width"))>e.captionHeight}},{key:"measureRelationshipCaptions",value:function(e){var t=this;return function(){for(var n=[],r=0,i=Array.from(e);r<i.length;r++){var o=i[r];o.captionHeight=parseFloat(t.style.forRelationship(o).get("font-size")),o.captionLength=t.measureRelationshipCaption(o,o.caption),n.push(o.captionLayout=t.captionFitsInsideArrowShaftWidth(o)&&!o.isLoop()?"internal":"external")}return n}()}},{key:"shortenCaption",value:function(e,t,n){for(var r=t||"caption";;){if(r.length<=2)return["",0];r=r.substr(0,r.length-2)+"\u2026";var i=this.measureRelationshipCaption(e,r);if(i<n)return[r,i]}}},{key:"computeGeometryForNonLoopArrows",value:function(e){var t=function(e){return e*e};return function(){for(var n=[],r=0,i=Array.from(e);r<i.length;r++){var o=i[r];if(o.isLoop())n.push(void 0);else{var a=o.nodeA.x-o.nodeB.x,s=o.nodeA.y-o.nodeB.y,l=(Math.atan2(s,a)/Math.PI*180+360)%360,c=Math.sqrt(t(a)+t(s));n.push(function(){for(var e=[],t=0,n=Array.from(o.relationships);t<n.length;t++){var r=n[t];r.naturalAngle=r.target===o.nodeA?(l+180)%360:l,e.push(r.centreDistance=c)}return e}())}}return n}()}},{key:"distributeAnglesForLoopArrows",value:function(e,t){return function(){for(var n=[],r=0,i=Array.from(e);r<i.length;r++){var o=i[r];if(o.isLoop()){for(var a,s,l=[],c=o.nodeA,u=0,h=Array.from(t);u<h.length;u++){var d=h[u];d.isLoop()||(d.source===c&&l.push(d.naturalAngle),d.target===c&&l.push(d.naturalAngle+180))}if((l=l.map((function(e){return(e+360)%360})).sort((function(e,t){return e-t}))).length>0){var p,f,g={start:0,end:0};for(a=0;a<l.length;a++){f=l[a],(p=a===l.length-1?l[0]+360:l[a+1])-f>g.end-g.start&&(g.start=f,g.end=p)}s=(g.end-g.start)/(o.relationships.length+1),n.push(function(){var e=[];for(a=0;a<o.relationships.length;a++)d=o.relationships[a],e.push(d.naturalAngle=(g.start+(a+1)*s-90)%360);return e}())}else s=360/o.relationships.length,n.push(function(){var e=[];for(a=0;a<o.relationships.length;a++)d=o.relationships[a],e.push(d.naturalAngle=a*s);return e}())}else n.push(void 0)}return n}()}},{key:"layoutRelationships",value:function(e){var t=this,n=e.groupedRelationships();return this.computeGeometryForNonLoopArrows(n),this.distributeAnglesForLoopArrows(n,e.relationships()),function(){for(var e=[],r=0,i=Array.from(n);r<i.length;r++){for(var o=i[r],a=0,l=Array.from(o.relationships);a<l.length;a++){var c=l[a];delete c.arrow}var u=(o.relationships.length-1)/2,h=o.relationships.length-1,d=30*h>150?150/h:30;e.push(function(){for(var e=[],n=0;n<o.relationships.length;n++){var r,i,a;c=o.relationships[n];var l=parseFloat(t.style.forRelationship(c).get("shaft-width"))||2,h=l+6,p=h;if(o.isLoop())c.arrow=new Je(c.source.radius,40,30,l,h,p,c.captionHeight);else if(n===u)c.arrow=new qe(c.source.radius,c.target.radius,c.centreDistance,l,h,p,c.captionLayout);else{var f=d*(n-u);o.nodeA!==c.source&&(f*=-1),c.arrow=new Ze(c.source.radius,c.target.radius,c.centreDistance,f,l,h,p,c.captionLayout)}e.push((r=Array.from(a=c.arrow.shaftLength>c.captionLength?[c.caption,c.captionLength]:t.shortenCaption(c,c.caption,c.arrow.shaftLength)),i=Object(s.a)(r,2),c.shortCaption=i[0],c.shortCaptionLength=i[1],r),a)}return e}())}return e}()}}]),e}(),Ke=function(){function e(t){Object(c.a)(this,e),this.style=t,this.relationshipRouting=new Xe(this.style)}return Object(u.a)(e,[{key:"formatNodeCaptions",value:function(e){var t=this;return Array.from(e).map((function(e){return e.caption=tt(e,t.style)}))}},{key:"formatRelationshipCaptions",value:function(e){var t=this;return function(){for(var n=[],r=0,i=Array.from(e);r<i.length;r++){var o=i[r],a=t.style.forRelationship(o).get("caption");n.push(o.caption=t.style.interpolate(a,o))}return n}()}},{key:"setNodeRadii",value:function(e){var t=this;return Array.from(e).map((function(e){return e.radius=parseFloat(t.style.forNode(e).get("diameter"))/2}))}},{key:"onGraphChange",value:function(e){return this.setNodeRadii(e.nodes()),this.formatNodeCaptions(e.nodes()),this.formatRelationshipCaptions(e.relationships()),this.relationshipRouting.measureRelationshipCaptions(e.relationships())}},{key:"onTick",value:function(e){return this.relationshipRouting.layoutRelationships(e)}}]),e}(),$e=function(e){return e*e},et=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){if(0===n[t].text.length)return!1}return!0},tt=function(e,t){for(var n=t.forNode(e).get("caption"),r=t.interpolate(n,e),i=parseFloat(t.forNode(e).get("font-size")),o=i,a=function(e){return We(e,"sans-serif",i)},l=r.split(" "),c=function(n,r){var i=(1+r-n/2)*o;t.forNode(e).get("icon-code")&&(i+=e.radius/3);var a=r<n/2?i-o:i,s=2*Math.sqrt($e(e.radius)-$e(a));return{node:e,text:"",baseline:i,remainingWidth:s}},u=function(e){for(var t=[],n=0,r=0,i=e-1,o=i>=0;o?r<=i:r>=i;o?r++:r--){for(var s=c(e,r);n<l.length&&a(" ".concat(l[n]))<s.remainingWidth;)s.text+=" ".concat(l[n]),s.remainingWidth-=a(" ".concat(l[n])),n++;t.push(s)}return n<l.length&&function(e,t,n){for(var r=[];!(t.length<=2);){if(n(t=t.substr(0,t.length-2)+"\u2026")<e.remainingWidth){e.text+=" ".concat(t);break}r.push(void 0)}}(t[e-1],l[n],a),[t,n]},h=0,d=2*e.radius/i,p=[c(1,0)],f=1,g=d,v=g>=1;v?f<=g:f>=g;v?f++:f--){var y=Array.from(u(f)),m=Object(s.a)(y,2),b=m[0],x=m[1];if(et(b)){var k=Array.from([b,x]),w=Object(s.a)(k,2);p=w[0],h=w[1]}if(h>=l.length)return p}return p},nt={"Expand / Collapse":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g class="icon"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>Expand / Collapse</title><circle class="a" cx="13.5" cy="10.498" r="3.75"/><circle class="a" cx="21" cy="2.998" r="2.25"/><circle class="a" cx="21" cy="15.748" r="2.25"/><circle class="a" cx="13.5" cy="20.998" r="2.25"/><circle class="a" cx="3" cy="20.998" r="2.25"/><circle class="a" cx="3.75" cy="5.248" r="2.25"/><line class="a" x1="16.151" y1="7.848" x2="19.411" y2="4.588"/><line class="a" x1="16.794" y1="12.292" x2="19.079" y2="14.577"/><line class="a" x1="13.5" y1="14.248" x2="13.5" y2="18.748"/><line class="a" x1="10.851" y1="13.147" x2="4.59" y2="19.408"/><line class="a" x1="10.001" y1="9.149" x2="5.61" y2="6.514"/></g></svg>',Unlock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g class="icon"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>Unlock</title><path class="a" d="M.75,9.75V6a5.25,5.25,0,0,1,10.5,0V9.75"/><rect class="a" x="6.75" y="9.75" width="16.5" height="13.5" rx="1.5" ry="1.5"/><line class="a" x1="15" y1="15" x2="15" y2="18"/></g></svg>',New:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g class="icon"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>news</title><polygon fill-rule="evenodd"  points="13 11 22 11 22 13 13 13 13 22 11 22 11 13 2 13 2 11 11 11 11 2 13 2"/></g></svg>',Delete:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g class="icon"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>news</title><path fill="#333333" d="M19.376,9.81c-0.016-0.1-0.077-0.197-0.168-0.29c-0.733,0.745-3.683,0.868-7.209,0.868s-6.473-0.123-7.21-0.868C4.699,9.613,4.642,9.71,4.621,9.81H4.615l0.002,0.054c0,0.006-0.002,0.012-0.002,0.019c0,0.014,0.004,0.028,0.006,0.041l0.574,11.76h0.001C5.247,22.606,6.303,24,11.999,24c5.696,0,6.753-1.394,6.803-2.316h0.004l0.575-11.76c0.001-0.014,0.006-0.027,0.006-0.041c0-0.006-0.004-0.012-0.004-0.019l0.004-0.054H19.376z"/><path fill="#333333" d="M15.509,3.655V0.806c0-0.464-0.38-0.844-0.844-0.844H9.026c-0.463,0-0.842,0.379-0.842,0.842v2.882C5.467,3.994,3.607,4.618,3.607,5.341v1.373c0,0.282,0.285,0.55,0.797,0.792c1.34,0.629,4.238,1.066,7.595,1.066c3.36,0,6.256-0.437,7.598-1.066c0.509-0.242,0.796-0.51,0.796-0.792V5.341C20.393,4.593,18.389,3.949,15.509,3.655z M9.941,3.54L9.709,3.554v-1.15c0-0.503,0.07-0.915,0.153-0.915c0.085,0,0.565,0,1.069,0h1.831c0.501,0,0.983,0,1.067,0c0.084,0,0.153,0.412,0.153,0.915v1.132c-0.637-0.033-1.299-0.054-1.985-0.054C11.288,3.482,10.598,3.503,9.941,3.54z"/></g></svg>',Edit:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g class="icon"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>edit</title> <path fill-rule="evenodd" d="M14.8024118,6.44526791 L8.69610276,12.549589 C8.29095108,12.9079238 8.04030835,13.4092335 8,13.8678295 L8,16.0029438 L10.0639829,16.004826 C10.5982069,15.9670062 11.0954869,15.7183782 11.4947932,15.2616227 L17.556693,9.19972295 L14.8024118,6.44526791 Z M16.2168556,5.0312846 L18.9709065,7.78550938 L19.8647941,6.89162181 C19.9513987,6.80501747 20.0000526,6.68755666 20.0000526,6.56507948 C20.0000526,6.4426023 19.9513987,6.32514149 19.8647932,6.23853626 L17.7611243,4.13485646 C17.6754884,4.04854589 17.5589355,4 17.43735,4 C17.3157645,4 17.1992116,4.04854589 17.1135757,4.13485646 L16.2168556,5.0312846 Z M22,13 L22,20 C22,21.1045695 21.1045695,22 20,22 L4,22 C2.8954305,22 2,21.1045695 2,20 L2,4 C2,2.8954305 2.8954305,2 4,2 L11,2 L11,4 L4,4 L4,20 L20,20 L20,13 L22,13 Z M17.43735,2 C18.0920882,2 18.7197259,2.26141978 19.1781068,2.7234227 L21.2790059,4.82432181 C21.7406843,5.28599904 22.0000526,5.91216845 22.0000526,6.56507948 C22.0000526,7.21799052 21.7406843,7.84415992 21.2790068,8.30583626 L12.9575072,16.6237545 C12.2590245,17.4294925 11.2689,17.9245308 10.1346,18.0023295 L6,18.0023295 L6,17.0023295 L6.00324765,13.7873015 C6.08843822,12.7328366 6.57866679,11.7523321 7.32649633,11.0934196 L15.6953877,2.72462818 C16.1563921,2.2608295 16.7833514,2 17.43735,2 Z"/></g></svg>',Remove:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g class="icon"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>Remove</title><path class="a" d="M8.153,13.664a12.271,12.271,0,0,1-5.936-4.15L1.008,7.96a.75.75,0,0,1,0-.92L2.217,5.486A12.268,12.268,0,0,1,11.9.75h0a12.269,12.269,0,0,1,9.684,4.736L22.792,7.04a.748.748,0,0,1,0,.92L21.584,9.514"/><path class="a" d="M10.4,10.937A3.749,3.749,0,1,1,15.338,9"/><circle class="a" cx="17.15" cy="17.25" r="6"/><line class="a" x1="14.15" y1="17.25" x2="20.15" y2="17.25"/></g></svg>'},rt=function(){},it=function(e,t,n){null==n&&(n=30),t-=1;var r=2*Math.PI/6*t,i=r+2*Math.PI/6,o=Math.max(e+8,20);return V.a.svg.arc().innerRadius(o).outerRadius(o+n).startAngle(r).endAngle(i).padAngle(.03)},ot=function(e){return e.selected?[e]:[]},at=function(e,t,n,r,i,o,a,s){var l=e.selectAll("path.".concat(i)).data(ot),c=e.selectAll(".icon.".concat(i)).data(ot),u=l.enter().append("path").classed(i,!0).classed("context-menu-item",!0).attr({d:function(e){return it(e.radius,r,1)()}}),h=nt[a];return function(e,t,n,r,i){(function(){for(var o=[],a=0,s=Array.from(t);a<s.length;a++){var l=s[a];l.on("mousedown.drag",(function(){return V.a.event.stopPropagation(),null})),l.on("mouseup",(function(t){return n.trigger(e,t)})),l.on("mouseover",(function(t){return t.contextMenu={menuSelection:e,menuContent:r,label:i},n.trigger("menuMouseOver",t)})),o.push(l.on("mouseout",(function(e){return delete e.contextMenu,n.trigger("menuMouseOut",e)})))}})()}(n,[u,c.enter().appendSVG(h).classed(i,!0).classed("context-menu-item",!0).attr({transform:function(e){return"translate("+Math.floor(it(e.radius,r).centroid()[0]+100*o[0]/100)+","+Math.floor(it(e.radius,r).centroid()[1]+100*o[1]/100)+") scale(0.7)"},color:function(e){return t.style.forNode(e).get("text-color-internal")},fill:function(e){return t.style.forNode(e).get("text-color-internal")}})],t,s,h),u.transition().duration(200).attr({d:function(e){return it(e.radius,r)()}}),l.exit().transition().duration(200).attr({d:function(e){return it(e.radius,r,1)()}}).remove(),c.exit().remove()},st=new y({onGraphChange:function(e,t){return at(e,t,"nodeClose",1,"remove_node",[-8,-8],"Remove","Dismiss")},onTick:rt}),lt=new y({onGraphChange:function(e,t){return at(e,t,"nodeDblClicked",2,"expand_node",[-8,-8],"Expand / Collapse","Expand / Collapse child relationships")},onTick:rt}),ct=new y({onGraphChange:function(e,t){return at(e,t,"nodeUnlock",3,"unlock_node",[-8,-6],"Unlock","Unlock the node to re-layout the graph")},onTick:rt}),ut=new y({onGraphChange:function(e,t){return at(e,t,"nodeDelete",4,"delete_node",[-10,-12],"Delete","delete node")},onTick:rt}),ht=new y({onGraphChange:function(e,t){return at(e,t,"nodeNew",5,"new_node",[-9,-9],"New","new node")},onTick:rt}),dt=new y({onGraphChange:function(e,t){return at(e,t,"nodeEdit",6,"edit_node",[-6,-6],"Edit","edit node")},onTick:rt}),pt=[];pt.push(lt),pt.push(st),pt.push(ct),pt.push(ut),pt.push(ht),pt.push(dt);var ft=function(){},gt=function(e){return e.rightClicked?[e]:[]},vt=function(e,t,n,r,i,o){e.selectAll(".right-menu.".concat(i)).remove();var a=e.selectAll(".right-menu.".concat(i)).data(gt).enter().append("g").classed(i,!0).classed("right-menu",!0),s=a.append("rect").attr({width:100,height:20,fill:"white",stroke:"#e8e8e8","stroke-width":1}),l=a.append("text").text(o).classed("right-menu-text",!0).attr({x:10,y:10});a.attr({transform:"translate(40,".concat(20*r,")")}),function(e,t,n,r){(function(){for(var r=0,i=Array.from(t);r<i.length;r++){var o=i[r];o.on("mousedown.drag",(function(){return V.a.event.stopPropagation(),null})),o.on("mouseup",(function(t){return n.trigger(e,t)}))}})()}(n,[s,l],t)},yt=new y({onGraphChange:function(e,t){return vt(e,t,"clearSelected",0,"clear_selected","\u6e05\u9664\u9009\u62e9")},onTick:ft}),mt=new y({onGraphChange:function(e,t){return vt(e,t,"contrarySelected",1,"contrary_selected","\u53cd\u9009")},onTick:ft}),bt=new y({onGraphChange:function(e,t){return vt(e,t,"backStatus",2,"back_status","\u4e0a\u4e00\u6b65")},onTick:ft}),xt=new y({onGraphChange:function(e,t){return vt(e,t,"initStatus",3,"init_status","\u521d\u59cb\u5316")},onTick:ft}),kt=new y({onGraphChange:function(e,t){return vt(e,t,"madeChart",4,"made_chart","\u751f\u6210\u56fe")},onTick:ft}),wt=(new y({onGraphChange:function(e,t){return vt(e,t,"startFrame",3,"start_frame","\u64ad\u653e\u52a8\u753b")},onTick:ft}),new y({onGraphChange:function(e,t){return vt(e,t,"addRel",1,"add_rel","\u65b0\u589e\u8fb9")},onTick:ft})),Ct=[],jt=[];function Ot(){var e=V.a.dispatch("click","dblclick");return V.a.rebind((function(t){var n,r=null;return t.on("mousedown",(function(){return V.a.event.target.__data__.fixed=!0,n=V.a.mouse(document.body),V.a.event.stopPropagation()})),t.on("mouseup",(function(){if(t=n,i=V.a.mouse(document.body),!(Math.sqrt(Math.pow(t[0]-i[0],2),Math.pow(t[1]-i[1],2))>5))return r?(window.clearTimeout(r),r=null,e.dblclick(V.a.event.target.__data__)):(e.click(V.a.event.target.__data__),r=window.setTimeout((V.a.event,function(){return r=null}),250));var t,i}))}),e,"on")}Ct.push(yt),Ct.push(mt),Ct.push(bt),Ct.push(xt),Ct.push(kt),jt.push(wt);var Mt=function(e,t,n,r,i){var o={style:i},a=V.a.select(e),s=a.append("g").attr("transform","translate(0,0)"),l=s.append("rect").style("fill","none").style("pointer-events","all").attr("x","-2500").attr("y","-2500").attr("width","5000").attr("height","5000").attr("transform","scale(1)"),c=s.append("g"),u=new Ke(i),h=!1,d=200,p=!0;o.trigger=function(e){console.log(e)};var f=function(e){return o.trigger("nodeDragToggle",e)},g=function(e){return V.a.event.stopPropagation(),p=!1,o.trigger("relationshipClicked",e)},v=function(e){return o.trigger("nodeMouseOver",e)},y=function(e){return o.trigger("nodeMouseOut",e)},m=function(e){return o.trigger("relMouseOver",e)},b=function(e){return o.trigger("relMouseOut",e)},x=null,k=function(){return h=!0,c.attr("transform","translate(".concat(w.translate(),")scale(").concat(w.scale(),")"))},w=V.a.behavior.zoom().scaleExtent([.2,1]).on("zoom",k),C=function(e,t){return V.a.transition().duration(500).tween("zoom",(function(){var n=V.a.interpolate(w.translate(),e),r=V.a.interpolate(w.scale(),t);return function(e){return w.scale(r(e)).translate(n(e)),k()}}))},j=!0;o.zoomInClick=function(){return j=!0,O(this)},o.zoomOutClick=function(){return j=!1,O(this)};var O=function(e){h=!0;var t={zoomInLimit:!1,zoomOutLimit:!1};return j?(x=Number((1.2*w.scale()).toFixed(2)))>=w.scaleExtent()[1]?(t.zoomInLimit=!0,C(w.translate(),w.scaleExtent()[1])):C(w.translate(),x):(x=Number((.8*w.scale()).toFixed(2)))<=w.scaleExtent()[0]?(t.zoomOutLimit=!0,C(w.translate(),w.scaleExtent()[0])):C(w.translate(),x),t};l.on("click",(function(){if(!h)return o.trigger("canvasClicked",e)})),s.call(w).on("dblclick.zoom",null).on("click.zoom",(function(){return h=!1})).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null).on("mousewheel.zoom",null);var M=function(){var e={frameCount:0,geometry:0,relationshipRenderers:function(){var e={};return R.forEach((function(t){return e[t.name]=0})),e}(),duration:function(){return e.lastFrame-e.firstFrame},fps:function(){return(1e3*e.frameCount/e.duration()).toFixed(1)},lps:function(){return(1e3*e.layout.layoutSteps/e.duration()).toFixed(1)},top:function(){var t,n=[];for(var r in e.relationshipRenderers)t=e.relationshipRenderers[r],n.push({name:r,time:t});n.push({name:"forceLayout",time:e.layout.layoutTime}),n.sort((function(e,t){return t.time-e.time}));var i=n.reduce((function(e,t){return e+t.time}),0);return n.map((function(e){return"".concat(e.name,": ").concat((100*e.time/i).toFixed(1),"%")})).join(", ")}};return e},L=M(),F=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},E=r.init((function(){L.firstFrame||(L.firstFrame=F()),L.frameCount++;var e=F();u.onTick(n),L.geometry+=F()-e;for(var t=c.selectAll("g.node").attr("transform",(function(e){return"translate(".concat(e.x,",").concat(e.y,")")})),r=0,i=Array.from(A);r<i.length;r++){var a=i[r];t.call(a.onTick,o)}for(var s=c.selectAll("g.relationship").attr("transform",(function(e){return"translate(".concat(e.source.x," ").concat(e.source.y,") rotate(").concat(e.naturalAngle+180,")")})),l=0,h=Array.from(R);l<h.length;l++){a=h[l];var d=F();s.call(a.onTick,o),L.relationshipRenderers[a.name]+=F()-d}return L.lastFrame=F()}));E.drag().on("dragstart.node",(function(e){return f(e)})).on("dragend.node",(function(){return f()})),o.collectStats=function(){var e=L;return e.layout=E.collectStats(),L=M(),e},o.update=function(){if(n){var e=c.selectAll("g.layer").data(["relationships","nodes"]);e.enter().append("g").attr("class",(function(e){return"layer ".concat(e)})),e.classed("ctrlClick",n.isCtrlClick);var t=n.nodes(),r=n.relationships(),i=c.select("g.layer.relationships").selectAll("g.relationship").data(r,(function(e){return e.id})).attr("class",(function(e){return e.className}));if(i.enter().append("g").attr("class",(function(e){return e.className})).attr("opacity",(function(e){return"node-relation_link"==e.className?.5:1})).on("mousedown",g).on("mouseover",m).on("mouseout",b),i.classed({selected:function(e){return e.selected},relationship:!0,hide:function(e){return"hide"==e.display}}),u.onGraphChange(n),n.initConfig.rightMenu.self)for(var a=0,s=Array.from(S);a<s.length;a++){var l=s[a];i.call(l.onGraphChange,o)}else for(var h=0,f=Array.from(R);h<f.length;h++){l=f[h];i.call(l.onGraphChange,o)}i.exit().remove();var x=c.select("g.layer.nodes").selectAll("g.node").data(t,(function(e){return e.id})).attr("class",(function(e){return e.className}));if(x.enter().append("g").attr("class",(function(e){return e.className})).call(E.drag).call(I).on("mouseover",v).on("mouseout",y).append("p"),x.classed({selected:function(e){return e.selected},ctrlClicked:function(e){return e.ctrlClicked},hide:function(e){return"hide"==e.display},node:!0}),n.initConfig.rightMenu.self)for(var k=0,w=Array.from(N);k<w.length;k++)l=w[k],x.call(l.onGraphChange,o);else for(var C=0,j=Array.from(A);C<j.length;C++)l=j[C],x.call(l.onGraphChange,o);if(n.initConfig.leftMenu.show)for(var O=0,M=Array.from(pt);O<M.length;O++)l=M[O],x.call(l.onGraphChange,o);if(n.initConfig.rightMenu.show)if(n.initConfig.rightMenu.self)for(var L=0,F=Array.from(jt);L<F.length;L++)l=F[L],x.call(l.onGraphChange,o);else for(var B=0,P=Array.from(Ct);B<P.length;B++)l=P[B],x.call(l.onGraphChange,o);return x.exit().remove(),p&&(E.update(n,[d,d]),o.resize(),o.trigger("updated")),p=!0}},o.resize=function(){var e=t();return a.attr("viewBox",[0,(d-e.height)/2,d,e.height].join(" "))},o.boundingBox=function(){return c.node().getBBox()},o.force=E;var I=Ot();return I.on("click",(function(e){return p=!1,0==V.a.event.button?V.a.event.ctrlKey?(n.isCtrlClick=!0,o.trigger("nodeCtrlClick",e)):o.trigger("nodeClicked",e):o.trigger("nodeClickRight",e)})),I.on("dblclick",(function(e){return o.trigger("nodeDblClicked",e)})),o},Lt={avoidOverlap:function(e){var t=V.a.geom.quadtree(e);return Array.from(e).map((function(e){return t.visit(At(e))}))}},At=function(e){var t=e.radius+10,n=e.x-t,r=e.x+t,i=e.y-t,o=e.y+t;return function(a,s,l,c,u){var h,d,p;return a.point&&a.point!==e&&(d=e.x-a.point.x,p=e.y-a.point.y,h=Math.sqrt(d*d+p*p),t=e.radius+10+a.point.radius),h<t&&(h=(h-t)/h*.5,e.x-=d*=h,e.y-=p*=h,a.point.x+=d,a.point.y+=p),s>r||c<n||l>o||u<i}},Nt=Lt;var Rt={force:function(){return{init:function(e){var t={},n=V.a.layout.force().linkDistance((function(e){return e.source.radius+e.target.radius+45})).charge(-1e3),r={layoutTime:0,layoutSteps:0};t.collectStats=function(){var e=r;return r={layoutTime:0,layoutSteps:0},e};!function(){var t=100,i=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},o=n.tick;n.tick=function(){for(var a=i(),s=t;s--&&i()-a<16.666666666666668;){var l=i();if(r.layoutSteps++,Nt.avoidOverlap(n.nodes()),o())return t=2,!0;r.layoutTime+=i()-l}return e(),!1}}();return t.update=function(e,t){var r=function(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var r=e[n];t[n]=r}return t}(e.nodes()),i=function(e){return Array.from(e.groupedRelationships()).map((function(e){return e.relationships[0]}))}(e),o=45*r.length/(2*Math.PI);return function(e,t,n){for(var r=[],i=0,o=Array.from(e);i<o.length;i++){var a=o[i];null!=a.x&&null!=a.y||r.push(a)}(function(){for(var e=[],i=0;i<r.length;i++){var o=r[i];o.x=t.x+n*Math.sin(2*Math.PI*i/r.length),e.push(o.y=t.y+n*Math.cos(2*Math.PI*i/r.length))}})()}(r,{x:t[0]/2,y:t[1]/2},o),n.nodes(r).links(i).size(t).start()},t.drag=n.drag,t.on=n.on,t}}}},St=function(){function e(t,n,r,i){Object(c.a)(this,e),this.graph=r,this.style=i;var o=Rt.force();this.viz=Mt(t,n,this.graph,o,this.style),this.callbacks={};var a=this.callbacks;this.viz.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Array.from(a[e]||[]).map((function(e){return e.apply(null,n)}))}}return Object(u.a)(e,[{key:"on",value:function(e,t){return(null!=this.callbacks[e]?this.callbacks[e]:this.callbacks[e]=[]).push(t),this}},{key:"layout",value:function(e){return arguments.length?(this.layout=e,this):this.layout}},{key:"grass",value:function(e){return arguments.length?(this.style.importGrass(e),this):this.style.toSheet()}},{key:"update",value:function(){return this.viz.update(),this}},{key:"resize",value:function(){return this.viz.resize(),this}},{key:"boundingBox",value:function(){return this.viz.boundingBox()}},{key:"collectStats",value:function(){return this.viz.collectStats()}},{key:"zoomIn",value:function(e){return this.viz.zoomInClick(e)}},{key:"zoomOut",value:function(e){return this.viz.zoomOutClick(e)}}]),e}(),Ft=n(11),Et=null,It=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(c.a)(this,n),r=t.call(this,e);var i=ne();if(r.defaultStyle=i.toSheet(),r.props.graphStyleData){var o=Y()(r.defaultStyle,r.props.graphStyleData);i.loadRules(o)}return r.state={initGraph:e.initGraphs,stats:{labels:{},relTypes:{}},graphStyle:i,zoomInLimitReached:!0,zoomOutLimitReached:!1,shouldResize:!1,nodes:[],relationships:[],graphEH:{},graphView:{},graph:{},svgElement:""},r.onGraphModelChange=r.onGraphModelChange.bind(Object(h.a)(r)),r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"exportPNG",value:function(){var e=this.state.graphView,t="graph";console.log(Et,e,t),function(e,t,n){var r,i=Q(e,t,n),o=$(i.node());console.log(o),(r=document.createElement("canvas")).width=i.attr("width"),r.height=i.attr("height"),window.canvg(r,o),te(n+".png",r.toDataURL("image/png"))}(Et,e,t)}},{key:"gainPngBase64",value:function(){var e=this.state.graphView;return function(e,t,n){var r,i=Q(e,t,n),o=$(i.node());return(r=document.createElement("canvas")).width=i.attr("width"),r.height=i.attr("height"),window.canvg(r,o),K(n+".png",r.toDataURL("image/png"))}(Et,e,"graph")}},{key:"graphInit",value:function(e){this.svgElement=e,Et=e}},{key:"retainNodesRel",value:function(e){var t=this,n=e.nodeMap,r=e.relMap,i=this.state,o=i.graph,a=i.graphView,s=o.nodeMap,l=o.relationshipMap;if(0==Object.keys(n).length&&0==Object.keys(r).length)return o.resetGraph(),void a.update();var c=o._nodes.map((function(e){return e.id})),u=o._relationships.map((function(e){return e.id}));c.map((function(e){n.hasOwnProperty(e)||(t.graph.removeConnectedRelationships(s[e]),t.graph.removeNode(s[e]))})),u.map((function(e){r.hasOwnProperty(l[e])||t.graph.removeRel(l[e])})),a.update()}},{key:"addNodesRel",value:function(e){var t=e.nodes,n=e.relationships,r=this.state,i=r.graph,o=r.graphView;i.addNodes(z(t)),i.addRelationships(T(n,i)),this.onGraphModelChange(D(i)),o.update()}},{key:"extendNodesRel",value:function(e,t){var n=this.state,r=n.graph,i=n.graphView,o=t.nodes,a=t.relationships;r.addExpandedNodes(e,z(o)),r.addRelationships(T(a,r)),r.checkNodeExtendRelToggle(),i.update(),this.onGraphModelChange(D(r))}},{key:"gainRelByNode",value:function(e){if(0==e.length)return{nodes:[],relationships:[]};var t=this.state,n=t.graph;t.graphView;return n.gainRelByNode(e)}},{key:"resetGraph",value:function(e){var t=e.nodes,n=e.relationships,r=this.state,i=r.graph,o=r.graphView,a=r.graphEH;i.resetGraph(),a.resetEH(),i.addNodes(z(t)),i.addRelationships(T(n,i)),this.onGraphModelChange(D(i)),o.update()}},{key:"clearSelected",value:function(){var e=this.state,t=e.graph,n=e.graphView,r=e.graphEH;t.initSeleced(),r.resetEH(),n.update()}},{key:"toggleByLabels",value:function(e,t){var n=this.state,r=n.graph,i=n.graphView;"node"==t?r.toggleNodeBylabels(e):r.toggleRelByLabels(e),r.checkNodeExtendRelToggle(),i.update(),this.onGraphModelChange(D(r))}},{key:"removeByLabels",value:function(e,t){var n=this.state,r=n.graph,i=n.graphView;"node"==t?r.removeNodeByLabels(e):r.removeRelByLabels(e),i.update(),this.onGraphModelChange(D(r))}},{key:"updateNodesRel",value:function(e,t){var n=this.state,r=n.graph,i=n.graphView;e.map((function(e){r.updateNodeProps(e)})),t.map((function(e){r.updateRelProps(e)})),this.onGraphModelChange(D(r)),i.update()}},{key:"updateOneNode",value:function(e){var t=this.state,n=t.graph,r=t.graphView;n.updateNodeProps(e),r.update()}},{key:"removeNode",value:function(e){this.graph.removeConnectedRelationships(e),this.graph.removeNode(e)}},{key:"updateStyleNodesRel",value:function(e,t){var n=this.state,r=n.graphStyle,i=n.graphView,o=n.graph;"node"==t&&e.length>0&&e.forEach((function(e){r.changeForSelector(e.selector,e.styleProp)}));var a=Y()(this.defaultStyle,r.toSheet());r.loadRules(a),this.onGraphModelChange(D(o)),i.update()}},{key:"zoomOut",value:function(){return this.state.graphView.zoomOut()}},{key:"zoomIn",value:function(){return this.state.graphView.zoomIn()}},{key:"initGraph",value:function(e){var t=e.nodes,n=void 0===t?{}:t,r=e.relationships,i=void 0===r?[]:r,o=e.config,a=function(e){return e.reduce((function(e,t){return e.taken.indexOf(t.id)>-1||(e.nodes.push(t),e.taken.push(t.id)),e}),{nodes:[],taken:[]}).nodes}(n);n.length>parseInt(this.props.initialNodeDisplay)&&(n=n.slice(0,this.props.initialNodeDisplay),i=this.props.relationships.filter((function(e){return n.filter((function(t){return t.id===e.startNodeId}))>0})),"Not all return nodes are being displayed due to Initial Node Display setting. Only ".concat(this.props.initialNodeDisplay," of ").concat(n.length," nodes are being displayed")),this.initGraphView({nodes:a,relationships:i,config:o})}},{key:"onGraphModelChange",value:function(e){this.setState({stats:e});var t=this.state.graph;if(this.props.getStats){var n,r,i=Object.keys(e.labels),o=this.state.graphStyle,a=Object.keys(e.relTypes);n=i.map((function(n,r){var i,a="*"!=n&&(null===t||void 0===t||null===(i=t.nodeLabelsMap)||void 0===i?void 0:i[n])?t.nodeMap[t.nodeLabelsMap[n][0]]:null,s={};a&&"hide"==a.display&&(s={filter:!0});var c=Object(l.a)(Object(l.a)({},o.forNode({labels:[n]})),{},{label:n},e.labels[n]);return c.props=Object(l.a)(Object(l.a)({},c.props),s),c})),r=a.map((function(n){var r,i="*"!=n&&(null===t||void 0===t||null===(r=t.relLabelsMap)||void 0===r?void 0:r[n])?t.relationshipMap[t.relLabelsMap[n][0]]:null,a={};i&&"hide"==i.display&&(a={filter:!0});var s=Object(l.a)(Object(l.a)({},o.forRelationship({type:n})),{},{label:n},e.relTypes[n]);return s.props=Object(l.a)(Object(l.a)({},s.props),a),s})),this.props.getStats({labels:n,relTypes:r})}}},{key:"getVisualAreaHeight",value:function(){return this.props.frameHeight&&this.props.fullscreen?this.props.frameHeight-(ze+2*Ge):this.props.frameHeight-ze||this.svgElement.parentNode.offsetHeight}},{key:"getNodeNeighbours",value:function(e,t,n){n(null,{nodes:[],relationships:[]})}},{key:"initGraphView",value:function(e){var t=this,n=e.nodes,r=e.relationships,i=e.config;if(void 0==i&&(i={rightMenu:{show:!0},leftMenu:{show:!0}}),!this.graphView){var o=St;this.graph=function(e,t,n){var r=new F(n);return r.addNodes(z(e)),r.addRelationships(T(t,r)),r.display={initialNodeDisplay:300,nodeCount:1},r}(n,r,i),this.graphView=new o(this.svgElement,(function(){return{width:t.svgElement.offsetWidth,height:t.getVisualAreaHeight()}}),this.graph,this.state.graphStyle),this.graphEH=new H(this.graph,this.graphView,this.getNodeNeighbours,this.props.onItemMouseOver,this.props.onItemSelect,this.onGraphModelChange,this.props.onEventListener),this.setState({graphEH:this.graphEH,graph:this.graph,graphView:this.graphView}),this.graphEH.bindEventHandlers(),this.onGraphModelChange(D(this.graph)),this.graphView.resize(),this.graphView.update()}}},{key:"render",value:function(){return Object(Ft.jsx)(_e,{theme:{name:"normal"},children:Object(Ft.jsx)("svg",{className:"neod3viz",ref:this.graphInit.bind(this)})})}}]),n}(r.Component),Bt=n(88),Pt=n(142),Gt=n(143),zt=n(111),Tt=n(145),Dt=n(146),_t=n(113),Vt=n(35),Ht=n.n(Vt),Ut=n(117),Yt=n(147),Qt=n(104),Wt=n.n(Qt),Jt=Pt.a.RangePicker,qt=Gt.a.Option,Zt=function(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),i=n[0],o=n[1],a=Object(r.useState)([]),l=Object(s.a)(a,2),c=l[0],u=l[1],h=Object(r.useState)([]),d=Object(s.a)(h,2),p=d[0],f=d[1],v=Object(r.useState)([]),y=Object(s.a)(v,2),m=y[0],b=y[1],x=Object(r.useState)([]),k=Object(s.a)(x,2),w=k[0],C=k[1],j=Object(r.useRef)(null),O=function(e){var t,n=[],r=[],i=Object(Bt.a)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value||{},a=o.date,s=o.description,l=o.found,c=o.id,h=o.project,d=void 0===h?"":h,p=o.round,v=void 0===p?0:p;n.push({id:"".concat(c,"_").concat(d),name:d,properties:{id:c,description:s,date:a,round:v}}),r=Object(g.a)(new Set([].concat(Object(g.a)(r),Object(g.a)(l))))}}catch(y){i.e(y)}finally{i.f()}b(n),C(r),f([]),u([n[0].name]),j.current=e};return Object(Ft.jsxs)(Tt.a,{style:{padding:"20px"},children:[Object(Ft.jsx)(Dt.a,{span:4,children:Object(Ft.jsxs)(_t.a,{icon:Object(Ft.jsx)(Yt.a,{}),className:"input-button",children:["Upload JSON",Object(Ft.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];if("application/json"===t.type){var n=new FileReader;n.readAsText(t),n.onload=function(){O(JSON.parse(this.result))}}else zt.b.error("\u4e0d\u652f\u6301\u6b64\u6587\u4ef6\u683c\u5f0f!")}})]})}),Object(Ft.jsx)(Dt.a,{span:4,children:Object(Ft.jsx)(Jt,{locale:Ut.a,onChange:function(e){e&&e.length?o([Ht()(new Date(e[0])).format("YYYY.HH.DD"),Ht()(new Date(e[1])).format("YYYY.HH.DD")]):o([])}})}),Object(Ft.jsxs)(Dt.a,{span:12,children:[Object(Ft.jsx)(Gt.a,{mode:"multiple",style:{width:"40%",marginLeft:10},placeholder:"project",value:c,onChange:function(e){u(e)},optionLabelProp:"label",children:m.map((function(e){return Object(Ft.jsx)(qt,{value:e.name,label:e.name,children:Object(Ft.jsx)("div",{className:"demo-option-label-item",children:e.name})},e.id)}))}),Object(Ft.jsx)(Gt.a,{mode:"multiple",style:{width:"40%",marginLeft:15},placeholder:"fund",value:p,onChange:function(e){f(e)},optionLabelProp:"label",children:w.map((function(e,t){return Object(Ft.jsx)(qt,{value:e,label:e,children:Object(Ft.jsx)("div",{className:"demo-option-label-item",children:e})},"".concat(e,"-").concat(t))}))})]}),Object(Ft.jsx)(Dt.a,{span:"2",offset:"1",children:Object(Ft.jsx)(_t.a,{type:"primary",onClick:function(){var t=Wt.a.cloneDeep(j.current);if(t&&t.length){var n,r=t.filter((function(e){var t=e.date,n=void 0===t?"":t,r=e.found,o=void 0===r?[]:r,a=e.project,s=void 0===a?"":a,l=!0,u=!c.length||c.includes(s);o=o.filter((function(e){return!p.length||p.includes(e)})),e.allFounds=Object(g.a)(e.found),e.found=o;var h=o.length>0;return p.length&&(h=o.length===p.length),i&&i.length&&(n<i[0]||n>i[1])&&(l=!1),l&&u&&h})),o=[],a=[],s=Object(Bt.a)(r);try{for(s.s();!(n=s.n()).done;){var l,u=n.value,h=u.date,d=u.description,f=u.found,v=u.id,y=u.project,m=u.round,b={};l={id:y,labels:["Project"],className:"Project",properties:{type:"project",project:y,date:h,name:y,id:v,description:d,round:m}};var x,k=Object(Bt.a)(f);try{for(k.s();!(x=k.n()).done;){var w=x.value;b={id:w,labels:["Person"],className:"Person",properties:{type:"fund",project:y,name:w,date:h}},a.push({id:"".concat(w,"-").concat(y),startNodeId:w,endNodeId:y,type:"fund to project",properties:{name:"".concat(v,"->").concat(y)}}),o.push(b)}}catch(C){k.e(C)}finally{k.f()}o.push(l)}}catch(C){s.e(C)}finally{s.f()}e.onGeneral&&e.onGeneral({nodes:o,relations:a})}else zt.b.error("\u8bf7\u5148\u4e0a\u4f20json\u6570\u636e")},children:"\u751f\u6210\u56fe\u8c31"})})]})},Xt=i.a.memo(Zt,(function(){return!0})),Kt=n(144),$t=n(116),en=function(e){var t=Object(r.useState)(e.visible),n=Object(s.a)(t,2),i=n[0],o=n[1],a=e.info;Object(r.useEffect)((function(){o(e.visible)}),[e.visible]);return Object(Ft.jsx)(Ft.Fragment,{children:Object(Ft.jsx)(Kt.a,{title:Object(Ft.jsx)($t.a,{color:"green",children:a.id}),placement:"right",closable:!1,onClose:function(){o(!1),e.onClose&&e.onClose()},visible:i,children:(a.properties||[]).map((function(e){return"project"!==e.key&&Object(Ft.jsxs)("p",{children:[Object(Ft.jsx)($t.a,{color:"blue",children:e.key})," : ",e.value||"--"]},e.key)}))})})},tn=(n(137),n(64)),nn=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useState)(!1),i=Object(s.a)(n,2),o=i[0],a=i[1],l=Object(r.useState)({}),c=Object(s.a)(l,2),u=c[0],h=c[1],d=Object(r.useState)(0),p=Object(s.a)(d,2),f=p[0],g=p[1];return Object(Ft.jsxs)("div",{children:[Object(Ft.jsx)(Xt,{onGeneral:function(n){var r=n.nodes,i=n.relations;g(r.length),t.current?e.current.resetGraph({nodes:r,relationships:i}):(e.current.initGraph({nodes:r,relationships:i}),t.current=!0)}}),Object(Ft.jsx)(en,{visible:o,onClose:function(){a(!1)},info:u}),Object(Ft.jsxs)("div",{className:"graph",children:[0===f&&Object(Ft.jsx)("div",{className:"empty",children:Object(Ft.jsx)(tn.a,{image:tn.a.PRESENTED_IMAGE_SIMPLE})}),Object(Ft.jsx)(It,{ref:e,getStats:function(){},onItemMouseOver:function(){},onEventListener:function(){},onItemSelect:function(e){"node"===e.type&&(a(!0),h(e.item))}})]})]})};n(138);var rn=function(){return Object(Ft.jsx)(nn,{})},on=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,148)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))};a.a.render(Object(Ft.jsx)(i.a.StrictMode,{children:Object(Ft.jsx)(rn,{})}),document.getElementById("root")),on()},98:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));n(91),n(99),n(100);var r=function(e){return[null,void 0].includes(e)||"function"!==typeof e.toString?e:e.toString()}}).call(this,n(128).setImmediate)}},[[139,1,2]]]);
//# sourceMappingURL=main.fa2ed831.chunk.js.map